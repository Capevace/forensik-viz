(function(e){function t(t){for(var r,a,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i={app:0},s=[];function o(e){return c.p+"js/"+({editor:"editor"}[e]||e)+"."+{editor:"84b3460d"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={editor:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({editor:"editor"}[e]||e)+"."+{editor:"5f89a118"}[e]+".css",i=c.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var l=s[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===r||u===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],f.parentNode.removeChild(f),n(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}i[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04f8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},"0af7":function(e,t,n){},1185:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("b0c0");var r=n("6a83"),a=n.n(r),i=n("04f8"),s=n.n(i),o=n("e11e");function c(e,t){var n;return e.person&&(n=t.people[e.person]),e.mediaSrc?Object(o["icon"])({iconUrl:t.files[e.mediaSrc],iconSize:[32,32],iconAnchor:[16,16],tooltipAnchor:[16,0],popupAnchor:[1,-34],className:"rounded-full shadow-lg border-2 border-gray-500 bg-white"}):n?Object(o["icon"])({iconUrl:n.avatarUrl||"https://avatars.dicebear.com/api/bottts/".concat(encodeURIComponent(n.name),".svg"),iconSize:[32,32],iconAnchor:[16,16],tooltipAnchor:[16,0],popupAnchor:[1,-34],className:"rounded-full shadow-lg border-2 border-gray-500 bg-white"}):Object(o["icon"])({iconUrl:a.a,shadowUrl:s.a,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]})}},"118f":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("53ca"),a=n("2909");n("a15b"),n("d81d"),n("99af"),n("b64b"),n("e9c4");function i(e,t,n){var i=t.exif[n]||{},s=document.createElement("div");s.className="overflow-hidden fixed top-0 right-0 mr-5 mt-10 text-base bg-gray-200 text-gray-900 rounded-md fixed min-w-5 transition opacity-60 hover:opacity-100",s.style="z-index: 3000; min-width: 300px;",s.innerHTML='\n\t\t<h1 class="w-full text-sm font-semibold px-2 py-1 mr-10 bg-gray-100 flex items-center justify-between">\n\t\t\t<span>EXIF Daten</span>\n\t\t\t<button>Anzeigen</button>\n\t\t</h1>\n\n\t\t<div class="overflow-y-scroll px-5 py-5 exif-tags hidden" style="max-height: 500px;">\n\t\t\t'.concat(["MD5","GPSLatitude","GPSLongitude","Latitude","Longitude","DateTime","DateTimeOriginal"].concat(Object(a["a"])(Object.keys(i))).map((function(e){var t=i[e];if(!t)return"";var n=t;return("object"===Object(r["a"])(t)||Array.isArray(t))&&(n=JSON.stringify(t,null,2)),'\n\t\t\t\t\t\t\t<div class="mb-5 font-medium">\n\t\t\t\t\t\t\t\t<h2 class="text-xs text-gray-600 mb-1">'.concat(e,'</h2>\n\t\t\t\t\t\t\t\t<pre class="text-sm">').concat(n,"</pre>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t")})).join("\n"),"\n\t\t</div>\n\t"),s.querySelector("button").addEventListener("click",(function(e){"Anzeigen"===e.target.textContent?(e.target.textContent="Verstecken",s.querySelector(".exif-tags").classList.remove("hidden")):(e.target.textContent="Anzeigen",s.querySelector(".exif-tags").classList.add("hidden"))})),e({images:[t.files[n]],options:{toolbar:!1,navbar:!1,zoomOnWheel:!0,hide:function(){s.remove()}}}),setTimeout((function(){document.querySelector(".viewer-container").after(s)}),100)}},"15d7":function(e,t,n){"use strict";n("0af7")},"365c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("2b0e")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col",attrs:{id:"app"}},[n("router-view")],1)},s=[],o={metaInfo:function(){var e=this.$store.state.setup.projectName;return{titleTemplate:function(){return"Forensik Viz"!==e?"".concat(e," - Forensik Viz"):"Forensik Viz"}}}},c=o,l=n("2877"),u=Object(l["a"])(c,i,s,!1,null,null,null),d=u.exports,f=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map fixed flex h-screen w-full flex-col"},[n("Header",{attrs:{small:"",locked:""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("form",{staticClass:"flex items-center gap-2 px-2",on:{submit:function(t){return t.preventDefault(),e.loadFile.apply(null,arguments)}}},[n("input",{ref:"vizFile",attrs:{type:"file"},on:{change:e.onVizFileChanged}}),n("button",{staticClass:"rounded-md bg-gray-200 py-1 px-4 text-gray-700 hover:text-blue-900 disabled:cursor-default disabled:opacity-50",class:{"hover:bg-blue-200":e.visFileSelected},attrs:{type:"submit",disabled:!e.visFileSelected}},[e._v(" "+e._s(e.$t("Laden"))+" ")]),n("a",{staticClass:"block rounded-md bg-gray-200 py-1 px-4 text-gray-700 hover:bg-blue-200 hover:text-blue-900",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.edit.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("Bearbeiten ‚ûù"))+" ")])])]},proxy:!0}])}),n("Map",{attrs:{locations:e.currentLocations},scopedSlots:e._u([{key:"control",fn:function(){return[n("EventControl",{attrs:{events:e.events,selectedEvent:e.selectedEvent},on:{select:e.selectEvent,next:e.next,previous:e.previous}})]},proxy:!0},{key:"chat",fn:function(){return[e.currentChats?n("ChatWindow",{staticClass:"shadow-lg",attrs:{chats:e.currentChats}}):e._e()]},proxy:!0},{key:"load",fn:function(){},proxy:!0}])})],1)},h=[],m=(n("d81d"),n("c740"),n("96c7")),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LMap",{ref:"map",attrs:{zoom:e.zoom,center:e.center}},[n("LTileLayer",{attrs:{url:e.url,attribution:e.attribution}}),n("LControl",{staticClass:"w-full max-w-2xl p-3",staticStyle:{width:"400px"},attrs:{position:"bottomright",disableScrollPropagation:!0}},[e._t("chat")],2),n("LControl",{staticClass:"w-full max-w-xl p-5",attrs:{position:"bottomleft",disableScrollPropagation:!0}},[e._t("control")],2),n("LControl",{staticClass:"w-full max-w-xl",staticStyle:{"min-width":"10vw"},attrs:{position:"topright"}},[e._t("load")],2),e._l(e.mappedLocations,(function(t){return n("LMarker",{key:t.id,attrs:{name:"lolol","lat-lng":t.position,icon:e.icon(t)},on:{click:function(n){return e.markerClicked(t)}}},[n("LTooltip",{attrs:{content:t.description}})],1)}))],2)},b=[],g=(n("4de4"),n("6cc5"),n("e11e")),y=n("2699"),x=n("a40a"),w=n("2253"),S=n("4e2b"),O=n("31dc"),C=n("1185"),j=n("118f"),E={props:{locations:{type:Array,required:!0}},name:"Example",components:{LMap:y["a"],LTileLayer:x["a"],LControl:w["a"],LMarker:S["a"],LTooltip:O["a"]},mounted:function(){this.recalculateBounds()},computed:{mappedLocations:function(){var e=this;return console.log(this.locations,this.$store.state.setup.locations),this.locations.map((function(t){return e.$store.state.setup.locations[t]})).filter((function(e){return!!e}))}},data:function(){return{zoom:6,center:Object(g["latLng"])(51.38619,10.56072),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://mateffy.me">Lukas Mateffy</a> & <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},methods:{markerClicked:function(e){e.mediaSrc&&Object(j["a"])(this.$viewerApi,this.$store.state.setup,e.mediaSrc)},recalculateBounds:function(){if(0!==this.locations.length){var e=this.mappedLocations.map((function(e){return[e.position.lat,e.position.lng]}));this.$refs.map.fitBounds(e,{padding:[50,50],maxZoom:14})}},icon:function(e){return Object(C["a"])(e,this.$store.state.setup)}},watch:{locations:function(){this.recalculateBounds()}}},A=E,k=(n("15d7"),Object(l["a"])(A,v,b,!1,null,null,null)),L=k.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex w-full max-w-md flex-col gap-3 rounded-lg bg-gray-200 px-3 py-3 shadow-md",staticStyle:{"min-width":"500px"}},[e.selectedEvent?n("div",{staticClass:"flex flex-col"},[n("h1",{staticClass:"text-lg font-semibold text-gray-800"},[e._v(" "+e._s(e.selectedEvent.title)+" ")]),n("h2",{staticClass:"text-base font-medium text-gray-500"},[e._v(" "+e._s(new Date(e.selectedEvent.start).toLocaleString())+" "),n("span",{staticClass:"text-gray-400"},[e._v("‚Äì")]),e._v(" "+e._s(e.isSameDay(e.selectedEvent.start,e.selectedEvent.end)?new Date(e.selectedEvent.end).toLocaleTimeString():new Date(e.selectedEvent.end).toLocaleString())+" ")])]):e._e(),n("Timeline",{ref:"timeline",attrs:{items:e.timelineEvents,options:e.options,events:["select"],selection:e.selectedEventId},on:{select:e.onEventSelect}}),n("div",{staticClass:"flex w-full"},[n("button",{staticClass:"flex-1 rounded-l bg-gray-500 px-2 py-2 text-gray-100 hover:bg-gray-600 active:bg-gray-700",on:{click:function(t){return e.$emit("previous")}}},[n("i",{staticClass:"el-icon-arrow-left el-icon-left"}),e._v(" "+e._s(e.$t("Vorheriges Event"))+" ")]),n("button",{staticClass:"flex-1 rounded-r bg-gray-500 px-2 py-2 text-gray-100 hover:bg-gray-600 active:bg-gray-700",on:{click:function(t){return e.$emit("next")}}},[e._v(" "+e._s(e.$t("N√§chstes Event"))+" "),n("i",{staticClass:"el-icon-arrow-right"})])])],1)},R=[],D=(n("fb6a"),n("13d9")),B={props:{events:{type:Array,required:!0},selectedEvent:{type:Object}},mounted:function(){this.selectedEvent&&this.$refs.timeline.setSelection(this.selectedEvent.id)},components:{Timeline:D["a"]},computed:{selectedEventId:function(){return this.selectedEvent?this.selectedEvent.id:null},timelineEvents:function(){return this.$store.getters["setup/eventList"]},options:function(){return{editable:!1,width:"100%",stack:!1,align:"left",type:"range"}}},methods:{onEventSelect:function(e){var t=e.items;this.$emit("select",t[0]),this.$refs.timeline.focus(t[0])},isSameDay:function(e,t){return new Date(e).toISOString().slice(0,10)===new Date(t).toISOString().slice(0,10)}},watch:{selectedEvent:function(){var e=this;this.selectedEvent&&requestAnimationFrame((function(){e.$refs.timeline.setSelection(e.selectedEvent.id),e.$refs.timeline.focus(e.selectedEvent.id)}))}}},F=B,z=(n("6ec1"),Object(l["a"])(F,_,R,!1,null,null,null)),N=z.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex w-full flex-col overflow-hidden rounded-lg bg-gray-100 bg-opacity-80",staticStyle:{"max-height":"70vh"}},[e.selectedChat?[n("button",{class:"w-full bg-"+e.selectedColor+"-300 text-"+e.selectedColor+"-900 py-1 hover:opacity-90",on:{click:function(t){e.chatHidden=!e.chatHidden}}},[e.chatHidden?n("span",[e._v(" "+e._s(e.$t("Anzeigen"))+" "),n("i",{staticClass:"el-icon-arrow-up"})]):n("span",[e._v(" "+e._s(e.$t("Schlie√üen"))+" "),n("i",{staticClass:"el-icon-arrow-down"})])]),n("div",{class:"flex items-center justify-between px-2 py-1 text-xs bg-"+e.selectedColor+"-200 text-"+e.selectedColor+"-800"},[n("div",{staticClass:"flex items-center gap-2"},[n("img",{staticClass:"h-4 w-4 rounded-full",attrs:{src:e.receiver.avatarUrl||"https://avatars.dicebear.com/api/bottts/"+encodeURIComponent(e.receiver.name)+".svg"}}),e._v(" "+e._s(e.receiver.name)+" ")]),n("div",{staticClass:"flex items-center gap-2"},[e._v(" "+e._s(e.sender.name)+" "),n("img",{staticClass:"h-4 w-4 rounded-full",attrs:{src:e.sender.avatarUrl||"https://avatars.dicebear.com/api/bottts/"+encodeURIComponent(e.sender.name)+".svg"}})])]),n("Chat",{staticClass:"w-full p-2 transition-all",style:e.chatHidden?{"max-height":"0px",paddingTop:0,paddingBottom:0}:{"max-height":"70vh"},attrs:{sender:e.sender,receiver:e.receiver,messages:e.messages,color:e.selectedColor}})]:e._e(),n("nav",{staticClass:"flex w-full justify-around"},e._l(e.chatList,(function(t){return n("TabButton",{key:t.id,style:"max-width: "+100/e.chatList.length+"%",attrs:{color:e.chatColor(t.type),count:e.filterMessagesForEvent(t.messages,e.selectedEvent).length,active:e.selectedChat&&e.selectedChat.id===t.id},on:{click:function(n){return e.selectChat(t)}}},[n("div",{staticClass:"flex-shrink-1 flex flex-col overflow-hidden truncate overflow-ellipsis text-left"},[n("div",{staticClass:"truncate"},[e._v(" "+e._s(e.toPerson(t.receiver).name)+" ")]),n("div",{class:"text-xs text-"+e.selectedColor+"-600"},[e._v(" "+e._s(e.chatName(t.type))+" ")])])])})),1)],2)},M=[];n("7db0");function P(e,t){return e.filter((function(e){return e.date.toISOString()>=t.start.toISOString()&&e.date.toISOString()<=t.end.toISOString()}))}var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:e.classes,attrs:{disabled:0===e.count},on:{click:function(t){return e.$emit("click",t)}}},[e._t("default"),n("span",{class:e.countClasses},[e._v(e._s(e.count))])],2)},T=[],H=(n("a9e3"),n("99af"),{props:{color:{type:String,default:"gray"},count:{type:Number,default:0},active:{type:Boolean,default:!0}},computed:{classes:function(){return"bg-".concat(this.color,"-300 text-").concat(this.color,"-900 flex-1 py-2 flex gap-2 items-center justify-between px-3 disabled:opacity-50 disabled:cursor-not-allowed font-medium ").concat(this.active?"":"opacity-70 hover:opacity-90")},countClasses:function(){return"bg-".concat(this.color,"-200 text-").concat(this.color,"-800 h-5 px-1 min-w-5 rounded-full inline-block flex items-center justify-center font-mono font-bold")}}}),$=H,q=Object(l["a"])($,U,T,!1,null,null,null),W=q.exports,V=n("a8c2"),G={props:{chats:{type:Array,required:!0}},data:function(){return{chatHidden:!1,selectedChat:null}},beforeMount:function(){this.selectedChat=this.chatList[0]},computed:{chatList:function(){var e=this;return this.chats.map((function(t){return e.$store.state.setup.chats[t]}))},selectedEvent:function(){return this.$store.state.setup.events[this.$store.state.map.selectedEventId]},messages:function(){if(!this.selectedChat)return null;var e=P(this.selectedChat.messages,this.selectedEvent);return e},sender:function(){return this.$store.state.setup.people[this.selectedChat.sender]},receiver:function(){return this.$store.state.setup.people[this.selectedChat.receiver]},selectedColor:function(){return this.chatColor(this.selectedChat?this.selectedChat.type:"")}},components:{Chat:V["a"],TabButton:W},methods:{filterMessagesForEvent:P,toPerson:function(e){return this.$store.state.setup.people[e]||this.$store.state.setup.people[e]},selectChat:function(e){this.selectedChat=e},chatColor:function(e){switch(e){case"whatsapp":return"green";case"sms":return"purple";case"phonelog":return"pink";default:return"gray"}},chatName:function(e){switch(e){case"whatsapp":return this.$t("WhatsApp");case"sms":return this.$t("SMS");case"phonelog":return this.$t("Anrufe")}}},watch:{chats:function(){var e=this;this.selectedChat||(this.selectedChat=this.chatList[0]),this.selectedChat=this.chatList.find((function(t){return t.id===e.selectedChat.id}))||this.chatList[0]}}},J=G,Z=Object(l["a"])(J,I,M,!1,null,null,null),K=Z.exports,Q={components:{Header:m["a"],Map:L,EventControl:N,ChatWindow:K},data:function(){return{visFileSelected:!1}},mounted:function(){this.selectEvent(this.events.length>0?this.events[0].id:null)},computed:{selectedEventId:function(){return this.$store.state.map.selectedEventId},eventsObj:function(){return this.$store.state.setup.events},events:function(){return this.$store.getters["setup/eventList"]},selectedEvent:function(){return this.selectedEventId?this.eventsObj[this.selectedEventId]:null},currentChats:function(){return this.selectedEvent?this.selectedEvent.chats:null},currentLocations:function(){return this.selectedEvent?this.selectedEvent.locations:[]}},methods:{onVizFileChanged:function(){this.visFileSelected=this.$refs.vizFile.files.length>0},loadFile:function(){this.$store.dispatch("setup/loadFile",this.$refs.vizFile.files[0])},edit:function(){this.$router.push("/editor")},selectEvent:function(e){this.$store.commit("map/selectEvent",e)},next:function(){var e=this;!this.selectedEventId&&this.events.length>0&&this.selectEvent(this.events[0].id);var t=this.events.findIndex((function(t){return t.id===e.selectedEventId}));-1===t||++t>=this.events.length||this.selectEvent(this.events[t].id)},previous:function(){var e=this;!this.selectedEventId&&this.events.length>0&&this.selectEvent(this.events[0].id);var t=this.events.findIndex((function(t){return t.id===e.selectedEventId}));-1===t||--t<0||this.selectEvent(this.events[t].id)}},watch:{eventsObj:function(){this.selectEvent(this.events.length>0?this.events[0].id:null)}}},X=Q,Y=Object(l["a"])(X,p,h,!1,null,null,null),ee=Y.exports;a["default"].use(f["a"]);var te=[{path:"/",name:"Map",component:ee},{path:"/editor",name:"Editor",component:function(){return n.e("editor").then(n.bind(null,"49d7"))}}],ne=new f["a"]({routes:te}),re=ne,ae=n("2f62"),ie={namespaced:!0,state:function(){return{selectedEventId:null}},mutations:{selectEvent:function(e,t){e.selectedEventId=t}},actions:{}},se=n("2909"),oe=n("5530"),ce=(n("4e82"),n("07ac"),n("caad"),n("2532"),n("a434"),n("b64b"),n("2b3d"),n("9861"),n("ac1f"),n("1276"),n("11c1")),le=n("c444"),ue=n("b85c"),de=(n("e9c4"),n("5319"),n("9b7f")),fe=window.zip;function pe(e){return he.apply(this,arguments)}function he(){return he=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s,o,c,l,u,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Blob([JSON.stringify(Object(oe["a"])(Object(oe["a"])({},t),{},{files:void 0}),null,2)],{type:"application/json"}),r=new fe.BlobWriter("application/zip"),a=new fe.ZipWriter(r),e.next=5,a.add("Viz.json",new fe.BlobReader(n));case 5:i=0,s=Object.values(t.chats);case 6:if(!(i<s.length)){e.next=41;break}o=s[i],console.log(o),c=Object(ue["a"])(o.messages),e.prev=10,c.s();case 12:if((l=c.n()).done){e.next=30;break}if(u=l.value,console.log(u),!u.mediaSrc){e.next=28;break}return e.prev=16,e.next=19,Object(de["e"])(u.mediaSrc.replace("Media/","/assets/Media/"),null);case 19:return d=e.sent,f=new Blob([d.buffer],{type:"image/jpeg"}),e.next=23,a.add(u.mediaSrc,new fe.BlobReader(f));case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](16),console.error("could not add file",e.t0);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](10),c.e(e.t1);case 35:return e.prev=35,c.f(),e.finish(35);case 38:i++,e.next=6;break;case 41:return e.next=43,a.close();case 43:return e.abrupt("return",r.getData());case 44:case"end":return e.stop()}}),e,null,[[10,32,35,38],[16,25]])}))),he.apply(this,arguments)}console.log(fe);var me={namespaced:!0,state:function(){return{projectName:"Forensik Viz",people:{},chats:{},locations:{},events:{},files:{},exif:{}}},getters:{eventList:function(e){return Object.values(e.events).sort((function(e,t){var n=e.start,r=t.start;return n<r?-1:n>r?1:0})).map((function(e){return Object(oe["a"])(Object(oe["a"])({},e),{},{content:e.title})}))}},mutations:{setViz:function(e,t){e.projectName=t.projectName||"Forensik Viz",e.people=t.people||{},e.chats=t.chats||{},e.locations=t.locations||{},e.events=t.events||{},e.files=t.files||{},e.exif=t.exif||{}},setProjectName:function(e,t){e.projectName=t},updateEvent:function(e,t){a["default"].set(e.events,t.id,t)},deleteEvent:function(e,t){a["default"].delete(e.events,t)},duplicateEvent:function(e,t){var n=e.events[t],r=Object(oe["a"])(Object(oe["a"])({},n),{},{locations:Object(se["a"])(n.locations),chats:Object(se["a"])(n.chats),id:Object(ce["v4"])()});a["default"].set(e.events,r.id,r)},toggleEventLocation:function(e,t){var n=t.event,r=t.location;if(n=e.events[n.id],n.locations.includes(r.id)){var a=n.locations.indexOf(r.id);-1!==a&&n.locations.splice(a,1)}else n.locations.push(r.id)},addChats:function(e,t){e.chats=Object(oe["a"])(Object(oe["a"])({},e.chats),t)},addFiles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.files=Object(oe["a"])(Object(oe["a"])({},e.files),t)},addLocations:function(e,t){e.locations=Object(oe["a"])(Object(oe["a"])({},e.locations),t)},updateLocation:function(e,t){a["default"].set(e.locations,t.id,t)},deleteLocation:function(e,t){a["default"].delete(e.locations,t.id);for(var n=0,r=Object.keys(e.events);n<r.length;n++){var i=r[n],s=e.events[i],o=s.locations,c=o.indexOf(t.id);-1!==c&&o.splice(c,1),e.events[i].locations=o}},setLocationPerson:function(e,t){var n=t.location,r=t.person;a["default"].set(e.locations,n.id,Object(oe["a"])(Object(oe["a"])({},e.locations[n.id]),{},{person:r}))},updatePerson:function(e,t){a["default"].set(e.people,t.id,t.id in e.people?Object(oe["a"])(Object(oe["a"])({},e.people[t.id]),t):t)},deletePerson:function(e,t){a["default"].delete(e.people,t)},addExif:function(e,t){e.exif=Object(oe["a"])(Object(oe["a"])({},e.exif),t)}},actions:{exportAsFile:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pe(e.state);case 2:n=t.sent,r=window.URL.createObjectURL(n),a=document.createElement("a"),a.href=r,a.download="".concat((new Date).toISOString().split(".")[0],".viz"),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){window.URL.revokeObjectURL(r),a.remove()}),100);case 9:case"end":return t.stop()}}),t)})))()},loadFile:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,Object(le["b"])(t);case 3:n.t1=n.sent,n.t0.commit.call(n.t0,"setViz",n.t1);case 5:case"end":return n.stop()}}),n)})))()},parseExif:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,Object(le["b"])(t);case 3:n.t1=n.sent,n.t0.commit.call(n.t0,"setViz",n.t1);case 5:case"end":return n.stop()}}),n)})))()}}};a["default"].use(ae["a"]);var ve=new ae["a"].Store({state:{},mutations:{},actions:{},modules:{map:ie,setup:me}}),be=(n("0fae"),n("ba8c"),n("dcb9"),n("0808"),n("6944")),ge=n.n(be),ye=n("58ca"),xe=n("a925"),we={Laden:"Load","Bearbeiten ‚ûù":"Edit ‚ûù","Vorheriges Event":"Previous event","N√§chstes Event":"Next event","Keine Nachrichten in diesem Zeitraum":"No messages during this time span",Importieren:"Import",Personen:"People",Events:"Events","Vorschau üëÅ‚Äç":"Preview üëÅ‚Äç","Komprimieren...":"Compress...","Download ZIP &nbsp;‚¨á":"Download ZIP &nbsp;‚¨á",WhatsApp:"WhatsApp",SMS:"SMS",Anrufe:"Phone Calls","Identit√§ten":"Identities","Person hinzuf√ºgen":"Add person","Unbenannte Person":"Unknown Person",Name:"Name",Farbe:"Color",Lila:"Purple","Gr√ºn":"Green",Blau:"Blue",ID:"ID","Daten importieren":"Import data","Via Mobile Revelator":"Via Mobile Revelator","ZIP-Datei ausw√§hlen":"Choose ZIP file","Mobile Revelator Export (.zip)":"Mobile Revelator Export (.zip)","Dateien √ºberpr√ºfen":"Check files","Datenbank-Dateien werden automatisch erkannt":"Database files will be recognized automatically",Dateien:"Files","Keine Dateien gefunden":"No files were found",Erkannt:"Recognized",Dateiname:"Filename","Importieren als":"Import as","Daten auslesen":"Read files","Gefundene Chats":"Found chats",Sender:"Sender","Empf√§nger":"Receiver",Typ:"Type","Es wurden {chats} Chats und {people} Personen gefunden.":"{chats} chats and {people} people were found.","Es wurden {chats} Chats und {people} Personen importiert.":"{chats} chats and {people} people were imported.","L√§dt...":"Loading...","ZIP-Datei wird gelesen...":"Reading ZIP file...","Daten werden importiert...":"Importing data...","Chats, Identit√§ten und Medien werden gesucht...":"Searching for chats, identities und media...","Keine Chats importiert":"No chats were imported",Timeline:"Timeline","Event hinzuf√ºgen":"Add event","Event duplizieren":"Duplicate event","Event l√∂schen":"Delete event",Chats:"Chats","Orte (Exif & GPS-Daten)":"Locations (Exif & GPS-Data)","Eigenen Ort hinzuf√ºgen":"Add a custom location","Hinzuf√ºgen":"Add",Titel:"Title","Start-Zeit":"Start-Time","Ende-Zeit":"End-Time",Beschreibung:"Description",an:"to",Einstellungen:"Settings","Optionen und Lizensen":"Options and licenses",Sprache:"Language",Deutsch:"German",English:"English"};function Se(){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(de["c"])();case 2:a["default"].use(ge.a),a["default"].use(ye["a"]),a["default"].use(xe["a"]),a["default"].config.productionTip=!1,t=window.localStorage.getItem("locale")||"de",n=new xe["a"]({locale:t,messages:{en:we},fallbackLocale:"de",formatFallbackMessages:!0}),new a["default"]({i18n:n,router:re,store:ve,render:function(e){return e(d)}}).$mount("#app");case 9:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}Se().catch((function(e){return console.error("GLOBAL CATCH:",e)}))},"6a83":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},"6ec1":function(e,t,n){"use strict";n("365c")},"96c7":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{class:{"flex items-center justify-between bg-blue-600 font-bold text-blue-100":!0,"h-12 px-3":!e.small,"h-8 text-xs":e.small}},[n("h1",{staticClass:"flex-1"},[n("input",{staticClass:"rounded border-none bg-transparent pl-2 font-bold text-blue-100 focus:bg-blue-100 focus:text-blue-900",class:{"text-sm":e.small,"text-xl":!e.small},attrs:{type:"text",name:"",disabled:e.locked},domProps:{value:e.projectName},on:{input:e.changedProjectName}})]),n("nav",{staticClass:"mx-auto my-5 flex items-center justify-center px-10"},[e._t("nav")],2),n("div",{staticClass:"flex flex-1 items-center justify-end gap-5"},[e._t("actions")],2)])},a=[],i={props:{small:{type:Boolean},locked:{type:Boolean,default:function(){return!1}}},computed:{projectName:function(){return this.$store.state.setup.projectName}},methods:{changedProjectName:function(e){this.$store.commit("setup/setProjectName",e.target.value)}}},s=i,o=n("2877"),c=Object(o["a"])(s,r,a,!1,null,null,null);t["a"]=c.exports},"9b7f":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n("b85c"),a=n("1da1"),i=(n("d3b7"),n("ac1f"),n("1276"),n("fb6a"),n("96cf"),n("3b92")),s=new e.FileSystem.MountableFileSystem,o=e.BFSRequire("buffer").Buffer;function c(){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initialize(s),console.log(i["FileFlag"]),s.mount("/assets",new e.FileSystem.InMemory),t.next=5,g("/assets/Media");case 5:return t.next=7,h("/assets/Media/test.txt","Hello World!");case 7:window.fs=s,window.BrowserFS=e;case 9:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"/import",a=i.length>2&&void 0!==i[2]?i[2]:function(){},t.abrupt("return",new Promise((function(t,i){s.existsSync(r)&&s.umount(r);var c=new FileReader;c.onload=function(n){var a=n.target.result;s.mount(r,new e.FileSystem.ZipFS(o.from(a))),t()},c.onprogress=a,c.onerror=i,c.readAsArrayBuffer(n)})));case 3:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"utf8",r=a.length>2&&void 0!==a[2]?a[2]:new i["FileFlag"]("r"),e.abrupt("return",new Promise((function(e,a){s.readFile(t,n,r,(function(t,n){t?a(t):e(n)}))})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){s.writeFile(t,n,"utf8",new i["FileFlag"]("w+"),0,(function(t){t?r(t):e()}))})));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split("/"),n=n.slice(1,n.length-1),a="",i=Object(r["a"])(n);try{for(i.s();!(o=i.n()).done;)c=o.value,a+="/"+c,s.existsSync(a)||s.mkdirSync(a)}catch(l){i.e(l)}finally{i.f()}case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){s.mkdir(t,0,(function(t){t?n(t):e()}))})));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}}).call(this,n("187c"))},a8c2:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col gap-3 overflow-y-scroll pb-5"},[n("div",{staticClass:"text-center text-xs font-medium text-gray-900 opacity-40"},[e._v(" "+e._s(e.safeFirstDate.toLocaleString())+" ")]),0===e.rebasedMessages.length?n("div",{staticClass:"text-center text-gray-600"},[e._v(" "+e._s(e.$t("Keine Nachrichten in diesem Zeitraum"))+" ")]):e._e(),e._l(e.rebasedMessages,(function(t){return n("Bubble",{key:t.id,attrs:{message:t,right:t.isSender,sender:t.isSender?e.sender:e.receiver,color:e.color+"-200"}})}))],2)},a=[],i=n("5530"),s=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"flex w-full "+(e.right?"justify-end pl-12":"justify-start pr-12")},[n("div",{class:"flex max-w-sm gap-2  "+(this.right?"flex-row-reverse":"")},[n("img",{staticClass:"h-6 w-6 rounded-full drop-shadow",attrs:{src:e.sender.avatarUrl||"https://avatars.dicebear.com/api/bottts/"+encodeURIComponent(e.sender.name)+".svg"}}),n("div",{class:e.classes},[e.message.mediaSrc?n("button",{staticClass:"mb-2 block w-full"},[n("FSImg",{attrs:{src:e.message.mediaSrc,mime:e.message.mimeType},on:{click:function(t){return e.onImageClick(e.message)}}})],1):e._e(),e.message.text?n("p",{class:"mb-2 block text-gray-900"},[e._v(" "+e._s(e.message.text)+" ")]):e._e(),n("span",{class:"block text-xs text-gray-900 opacity-60 "+(e.right?"text-right":"")},[e._v(" "+e._s(e.message.date.toLocaleString())+" ")])])])])}),o=[],c=n("ade3"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isImage?n("img",{staticClass:"w-full",attrs:{src:e.url},on:{click:function(t){return e.$emit("click",t)}}}):n("video",{staticClass:"w-full",attrs:{controls:"",loop:""}},[n("source",{attrs:{src:e.url,type:e.mime}})])])},u=[],d={props:{src:{type:String,required:!0},mime:{type:String,default:"image/jpeg"}},data:function(){return{dataUri:""}},created:function(){},computed:{url:function(){return this.$store.state.setup.files[this.src]},isImage:function(){return-1===(this.mime||"image/jpeg").indexOf("video")}}},f=d,p=n("2877"),h=Object(p["a"])(f,l,u,!1,null,null,null),m=h.exports,v=n("118f"),b={props:{message:{type:Object,required:!0},sender:{type:Object,default:function(){return{id:"1ed7504b-35bd-41b7-b8d7-38149b8a027c",name:"Unbekannt",avatarUrl:"https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/00/00bb8a893a2e125c3fce471364154f950a8db60d.jpg",color:"purple"}}},right:{type:Boolean,default:!1},color:{type:String,default:"gray-300"}},computed:{classes:function(){var e;return e={"block px-3 py-2 rounded-lg text-left shadow":!0},Object(c["a"])(e,"rounded-tr-none bg-".concat(this.color),!!this.right),Object(c["a"])(e,"rounded-tl-none bg-gray-300",!this.right),e}},methods:{onImageClick:function(e){Object(v["a"])(this.$viewerApi,this.$store.state.setup,e.mediaSrc)}},components:{FSImg:m}},g=b,y=Object(p["a"])(g,s,o,!1,null,null,null),x=y.exports,w={props:{messages:{type:Array,required:!0},sender:{type:Object,required:!0},receiver:{type:Object,required:!0},color:{type:String,default:"green"},firstDate:{type:Date},basePath:{type:String,default:"/import/Export/files/media/0/WhatsApp/Media/"}},computed:{safeFirstDate:function(){return this.messages[0]?this.messages[0].date:this.firstDate||new Date},rebasedMessages:function(){return this.messages.map((function(e){return e.mediaSrc?Object(i["a"])({},e):e}))}},components:{Bubble:x},methods:{}},S=w,O=Object(p["a"])(S,r,a,!1,null,null,null);t["a"]=O.exports},ba8c:function(e,t,n){},c444:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y}));var r=n("b85c"),a=n("5530"),i=n("1da1"),s=(n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("1276"),n("820e"),n("07ac"),n("96cf"),n("c64e")),o=n.n(s),c=n("9b7f"),l=(n("a4d3"),n("e01a"),n("b64b"),n("e285")),u=n("e16d");function d(e){var t=l["a"].load(e);delete t["MakerNote"];var n=null;"GPSLatitude"in t&&"GPSLongitude"in t&&(n={lat:parseFloat(t["GPSLatitude"].description),lng:parseFloat(t["GPSLongitude"].description)}),!n&&"Latitude"in t&&"Longitude"in t&&(n={lat:parseFloat(t["Latitude"].value),lng:parseFloat(t["Longitude"].value)});for(var r={},a=0,i=Object.keys(t);a<i.length;a++){var s=i[a],o=t[s];o.description&&""!==o.description&&(r[s]=o.description)}return r.position=n,r.MD5=Object(u["a"])(e),console.log(r.MD5),{tags:r,position:n}}var f=null;function p(){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(f){e.next=4;break}return e.next=3,window.initSqlJs({locateFile:function(e){return"/js/".concat(e)}});case 3:f=e.sent;case 4:return e.abrupt("return",f);case 5:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e,t){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return r=e.sent,i=new r.Database(t),i.each("SELECT DISTINCT Contact, ContactAlias FROM data",{},(function(e){var t={id:e.Contact,name:e.ContactAlias};n.people[t.id]=Object(a["a"])(Object(a["a"])({id:e.Contact},n.people[t.id]||{}),{},{name:e.ContactAlias||e.Contact})})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function b(e,t){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,s,l,u,f,h,m,v,b,g,y,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:for(r=e.sent,a=new r.Database(t),s={},l=[],u={},f={},h={},m={},v=[],a.each("SELECT\n\t\t\tmessages.*,\n\t\t\tmessage_media.file_path\n\t\tFROM\n\t\t\tmessages\n\t\t\tLEFT JOIN message_media ON messages.media_url = message_media.message_url",{},(function(e){var t={id:e.key_remote_jid,name:e.key_remote_jid,avatarUrl:"",color:"green"};s[t.id]?t=s[t.id]:s[t.id]=t;var r={id:o()(),sender:t.id,chatId:t.id,date:new Date(e.timestamp),type:"text",isSender:1===e.key_from_me,text:e.data||e.media_caption,mediaSrc:e.file_path,mimeType:e.media_mime_type};r.mediaSrc&&v.push(Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s,o,l,u,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["e"])(r.mediaSrc.replace("Media/","".concat(n,"/files/media/0/WhatsApp/Media/")),null);case 3:return t=e.sent,a=new Blob([t.buffer],{type:r.mimeType||"image/jpeg"}),f[r.mediaSrc]=URL.createObjectURL(a),i=r.mediaSrc.replace("Media/","/assets/Media/"),e.next=9,Object(c["a"])(i);case 9:return e.next=11,Object(c["f"])(i,t,null);case 11:if("image/jpeg"!==(r.mimeType||"image/jpeg")){e.next=21;break}return e.t0=d,e.next=15,a.arrayBuffer();case 15:e.t1=e.sent,s=(0,e.t0)(e.t1),o=s.tags,l=s.position,l&&(u=r.mediaSrc.split("/"),p=u[u.length-1],v={id:"location-".concat(r.mediaSrc),position:l,description:p,mediaSrc:r.mediaSrc},m[v.id]=v),h[r.mediaSrc]=o;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e["catch"](0),console.error("could not fetch file",r.mediaSrc,e.t2);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))()),(r.text||r.mediaSrc)&&l.push(r)})),b=0,g=l;b<g.length;b++)y=g[b],x="chat-".concat(y.chatId),x in u?u[x].messages.push(y):u[x]={id:x,type:"whatsapp",receiver:y.chatId,sender:null,messages:[y]};return e.next=15,Promise.allSettled(v);case 15:return e.abrupt("return",{chats:u,people:s,files:f,locations:m,exif:h});case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return x=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,s,o,l,u,f,p,h,m,v,b,g,y,x,w,S;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["d"])(t,"/load");case 2:return e.t0=JSON,e.next=5,Object(c["e"])("/load/Viz.json");case 5:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),console.log(n),n.files={},n.exif=n.exif||{},a=0,i=Object.values(n.chats);case 11:if(!(a<i.length)){e.next=59;break}s=i[a],o=Object(r["a"])(s.messages),e.prev=14,o.s();case 16:if((l=o.n()).done){e.next=48;break}if(u=l.value,e.prev=18,u.date=new Date(u.date),console.info(u.mediaSrc),!u.mediaSrc){e.next=41;break}return e.next=24,Object(c["e"])("/load/".concat(u.mediaSrc),null);case 24:return f=e.sent,p=new Blob([f.buffer],{type:u.mimeType||"image/jpeg"}),n.files[u.mediaSrc]=URL.createObjectURL(p),e.next=29,Object(c["a"])("/assets/".concat(u.mediaSrc));case 29:return e.next=31,Object(c["f"])("/assets/".concat(u.mediaSrc),f,null);case 31:if("image/jpeg"!==(u.mimeType||"image/jpeg")){e.next=41;break}return e.t2=d,e.next=35,p.arrayBuffer();case 35:e.t3=e.sent,h=(0,e.t2)(e.t3),m=h.tags,v=h.position,v&&(b=u.mediaSrc.split("/"),g=b[b.length-1],y={id:"location-".concat(u.mediaSrc),position:v,description:g,mediaSrc:u.mediaSrc},n.locations[y.id]=y||n.locations[y.id]),n.exif[u.mediaSrc]=m||n.exif[u.mediaSrc];case 41:e.next=46;break;case 43:e.prev=43,e.t4=e["catch"](18),console.error("could not fetch file",u.mediaSrc,e.t4);case 46:e.next=16;break;case 48:e.next=53;break;case 50:e.prev=50,e.t5=e["catch"](14),o.e(e.t5);case 53:return e.prev=53,o.f(),e.finish(53);case 56:a++,e.next=11;break;case 59:for(x=0,w=Object.values(n.events);x<w.length;x++)S=w[x],S.start=new Date(S.start),S.end=new Date(S.end);return e.abrupt("return",n);case 61:case"end":return e.stop()}}),e,null,[[14,50,53,56],[18,43]])}))),x.apply(this,arguments)}},e16d:function(e,t,n){"use strict";(function(e,r){var a=n("53ca"),i=(n("c19f"),n("d3b7"),n("ac1f"),n("1276"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fb2c"),n("25f0"),"input is invalid type"),s="object"===("undefined"===typeof window?"undefined":Object(a["a"])(window)),o=s?window:{};o.JS_MD5_NO_WINDOW&&(s=!1);var c=!s&&"object"===("undefined"===typeof self?"undefined":Object(a["a"])(self)),l=!o.JS_MD5_NO_NODE_JS&&"object"===("undefined"===typeof e?"undefined":Object(a["a"])(e))&&e.versions&&e.versions.node;l?o=r:c&&(o=self);var u,d=!o.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,f="0123456789abcdef".split(""),p=[128,32768,8388608,-2147483648],h=[0,8,16,24],m=["hex","array","digest","buffer","arrayBuffer","base64"],v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),b=[];if(d){var g=new ArrayBuffer(68);u=new Uint8Array(g),b=new Uint32Array(g)}!o.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!d||!o.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===Object(a["a"])(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var y=function(e){return function(t){return new w(!0).update(t)[e]()}},x=function(){var e=y("hex");e.create=function(){return new w},e.update=function(t){return e.create().update(t)};for(var t=0;t<m.length;++t){var n=m[t];e[n]=y(n)}return e};function w(e){if(e)b[0]=b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0,this.blocks=b,this.buffer8=u;else if(d){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}w.prototype.update=function(e){if(!this.finalized){var t,n=Object(a["a"])(e);if("string"!==n){if("object"!==n)throw i;if(null===e)throw i;if(d&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!d||!ArrayBuffer.isView(e)))throw i;t=!0}var r,s,o=0,c=e.length,l=this.blocks,u=this.buffer8;while(o<c){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)if(d)for(s=this.start;o<c&&s<64;++o)u[s++]=e[o];else for(s=this.start;o<c&&s<64;++o)l[s>>2]|=e[o]<<h[3&s++];else if(d)for(s=this.start;o<c&&s<64;++o)r=e.charCodeAt(o),r<128?u[s++]=r:r<2048?(u[s++]=192|r>>6,u[s++]=128|63&r):r<55296||r>=57344?(u[s++]=224|r>>12,u[s++]=128|r>>6&63,u[s++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),u[s++]=240|r>>18,u[s++]=128|r>>12&63,u[s++]=128|r>>6&63,u[s++]=128|63&r);else for(s=this.start;o<c&&s<64;++o)r=e.charCodeAt(o),r<128?l[s>>2]|=r<<h[3&s++]:r<2048?(l[s>>2]|=(192|r>>6)<<h[3&s++],l[s>>2]|=(128|63&r)<<h[3&s++]):r<55296||r>=57344?(l[s>>2]|=(224|r>>12)<<h[3&s++],l[s>>2]|=(128|r>>6&63)<<h[3&s++],l[s>>2]|=(128|63&r)<<h[3&s++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),l[s>>2]|=(240|r>>18)<<h[3&s++],l[s>>2]|=(128|r>>12&63)<<h[3&s++],l[s>>2]|=(128|r>>6&63)<<h[3&s++],l[s>>2]|=(128|63&r)<<h[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=p[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},w.prototype.hash=function(){var e,t,n,r,a,i,s=this.blocks;this.first?(e=s[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,r=(-1732584194^2004318071&e)+s[1]-117830708,r=(r<<12|r>>>20)+e<<0,n=(-271733879^r&(-271733879^e))+s[2]-1126478375,n=(n<<17|n>>>15)+r<<0,t=(e^n&(r^e))+s[3]-1316259209,t=(t<<22|t>>>10)+n<<0):(e=this.h0,t=this.h1,n=this.h2,r=this.h3,e+=(r^t&(n^r))+s[0]-680876936,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+s[1]-389564586,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+s[2]+606105819,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+s[3]-1044525330,t=(t<<22|t>>>10)+n<<0),e+=(r^t&(n^r))+s[4]-176418897,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+s[5]+1200080426,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+s[6]-1473231341,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+s[7]-45705983,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+s[8]+1770035416,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+s[9]-1958414417,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+s[10]-42063,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+s[11]-1990404162,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+s[12]+1804603682,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+s[13]-40341101,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+s[14]-1502002290,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+s[15]+1236535329,t=(t<<22|t>>>10)+n<<0,e+=(n^r&(t^n))+s[1]-165796510,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+s[6]-1069501632,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+s[11]+643717713,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+s[0]-373897302,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+s[5]-701558691,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+s[10]+38016083,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+s[15]-660478335,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+s[4]-405537848,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+s[9]+568446438,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+s[14]-1019803690,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+s[3]-187363961,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+s[8]+1163531501,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+s[13]-1444681467,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+s[2]-51403784,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+s[7]+1735328473,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+s[12]-1926607734,t=(t<<20|t>>>12)+n<<0,a=t^n,e+=(a^r)+s[5]-378558,e=(e<<4|e>>>28)+t<<0,r+=(a^e)+s[8]-2022574463,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+s[11]+1839030562,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+s[14]-35309556,t=(t<<23|t>>>9)+n<<0,a=t^n,e+=(a^r)+s[1]-1530992060,e=(e<<4|e>>>28)+t<<0,r+=(a^e)+s[4]+1272893353,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+s[7]-155497632,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+s[10]-1094730640,t=(t<<23|t>>>9)+n<<0,a=t^n,e+=(a^r)+s[13]+681279174,e=(e<<4|e>>>28)+t<<0,r+=(a^e)+s[0]-358537222,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+s[3]-722521979,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+s[6]+76029189,t=(t<<23|t>>>9)+n<<0,a=t^n,e+=(a^r)+s[9]-640364487,e=(e<<4|e>>>28)+t<<0,r+=(a^e)+s[12]-421815835,r=(r<<11|r>>>21)+e<<0,i=r^e,n+=(i^t)+s[15]+530742520,n=(n<<16|n>>>16)+r<<0,t+=(i^n)+s[2]-995338651,t=(t<<23|t>>>9)+n<<0,e+=(n^(t|~r))+s[0]-198630844,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+s[7]+1126891415,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+s[14]-1416354905,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+s[5]-57434055,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+s[12]+1700485571,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+s[3]-1894986606,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+s[10]-1051523,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+s[1]-2054922799,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+s[8]+1873313359,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+s[15]-30611744,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+s[6]-1560198380,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+s[13]+1309151649,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+s[4]-145523070,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+s[11]-1120210379,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+s[2]+718787259,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+s[9]-343485551,t=(t<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},w.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return f[e>>4&15]+f[15&e]+f[e>>12&15]+f[e>>8&15]+f[e>>20&15]+f[e>>16&15]+f[e>>28&15]+f[e>>24&15]+f[t>>4&15]+f[15&t]+f[t>>12&15]+f[t>>8&15]+f[t>>20&15]+f[t>>16&15]+f[t>>28&15]+f[t>>24&15]+f[n>>4&15]+f[15&n]+f[n>>12&15]+f[n>>8&15]+f[n>>20&15]+f[n>>16&15]+f[n>>28&15]+f[n>>24&15]+f[r>>4&15]+f[15&r]+f[r>>12&15]+f[r>>8&15]+f[r>>20&15]+f[r>>16&15]+f[r>>28&15]+f[r>>24&15]},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},w.prototype.buffer=w.prototype.arrayBuffer,w.prototype.base64=function(){for(var e,t,n,r="",a=this.array(),i=0;i<15;)e=a[i++],t=a[i++],n=a[i++],r+=v[e>>>2]+v[63&(e<<4|t>>>4)]+v[63&(t<<2|n>>>6)]+v[63&n];return e=a[i],r+=v[e>>>2]+v[e<<4&63]+"==",r},t["a"]=x()}).call(this,n("656e"),n("c8ba"))}});
//# sourceMappingURL=app.b25e2212.js.map