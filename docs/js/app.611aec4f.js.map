{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/marker-shadow.png","webpack:///./src/util/create-icon.js","webpack:///./src/util/inspect-image.js","webpack:///./src/components/map/Map.vue?9ceb","webpack:///./src/App.vue?ab4b","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue","webpack:///./src/views/Map.vue?f07f","webpack:///./src/components/map/Map.vue?0d8f","webpack:///src/components/map/Map.vue","webpack:///./src/components/map/Map.vue?5270","webpack:///./src/components/map/Map.vue","webpack:///./src/components/events/EventControl.vue?11d7","webpack:///src/components/events/EventControl.vue","webpack:///./src/components/events/EventControl.vue?7267","webpack:///./src/components/events/EventControl.vue","webpack:///./src/components/chat/ChatWindow.vue?8f7d","webpack:///./src/util/filter-messages-for-event.js","webpack:///./src/components/chat/TabButton.vue?06ef","webpack:///src/components/chat/TabButton.vue","webpack:///./src/components/chat/TabButton.vue?b1e6","webpack:///./src/components/chat/TabButton.vue","webpack:///src/components/chat/ChatWindow.vue","webpack:///./src/components/chat/ChatWindow.vue?a27e","webpack:///./src/components/chat/ChatWindow.vue","webpack:///src/views/Map.vue","webpack:///./src/views/Map.vue?4821","webpack:///./src/views/Map.vue","webpack:///./src/router/index.js","webpack:///./src/store/map.js","webpack:///./src/data-export.js","webpack:///./src/store/setup.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/assets/marker-icon.png","webpack:///./src/components/events/EventControl.vue?7ce7","webpack:///./src/components/layout/Header.vue?3a89","webpack:///src/components/layout/Header.vue","webpack:///./src/components/layout/Header.vue?693b","webpack:///./src/components/layout/Header.vue","webpack:///./src/fs.js","webpack:///./src/components/chat/Chat.vue?7c1f","webpack:///./src/components/chat/Bubble.vue?3d88","webpack:///./src/components/chat/FSImg.vue?d288","webpack:///src/components/chat/FSImg.vue","webpack:///./src/components/chat/FSImg.vue?7d6f","webpack:///./src/components/chat/FSImg.vue","webpack:///src/components/chat/Bubble.vue","webpack:///./src/components/chat/Bubble.vue?c622","webpack:///./src/components/chat/Bubble.vue","webpack:///src/components/chat/Chat.vue","webpack:///./src/components/chat/Chat.vue?27df","webpack:///./src/components/chat/Chat.vue","webpack:///./src/exif.js","webpack:///./src/data-import.js","webpack:///./src/md5.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","createIcon","location","state","person","people","mediaSrc","icon","iconUrl","files","iconSize","iconAnchor","tooltipAnchor","popupAnchor","className","avatarUrl","encodeURIComponent","markerIcon","shadowUrl","markerShadow","shadowSize","inspectImage","viewerApi","exif","element","style","innerHTML","keys","map","tagName","tagText","Array","isArray","JSON","stringify","join","querySelector","addEventListener","textContent","classList","remove","add","images","options","toolbar","navbar","zoomOnWheel","hide","after","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","component","scopedSlots","_u","fn","on","$event","preventDefault","loadFile","arguments","ref","onVizFileChanged","class","visFileSelected","_v","edit","proxy","currentLocations","events","selectedEvent","selectEvent","next","previous","currentChats","_e","zoom","center","url","attribution","staticStyle","_t","_l","id","position","markerClicked","description","_s","title","Date","start","toLocaleString","isSameDay","end","toLocaleTimeString","timelineEvents","selectedEventId","onEventSelect","$emit","selectedColor","chatHidden","receiver","sender","paddingTop","paddingBottom","messages","chat","chatList","chatColor","filterMessagesForEvent","selectedChat","selectChat","toPerson","chatName","filter","date","toISOString","classes","count","countClasses","Vue","use","VueRouter","routes","path","Map","router","namespaced","mutations","actions","zip","exportAsZip","inputBlob","Blob","blobWriter","BlobWriter","zipWriter","ZipWriter","BlobReader","values","chats","log","readFile","replace","file","blob","buffer","close","getData","projectName","locations","getters","eventList","sort","a","b","aStart","bStart","content","setViz","viz","setProjectName","updateEvent","set","deleteEvent","eventId","delete","duplicateEvent","oldEvent","uuid","toggleEventLocation","includes","index","indexOf","addChats","addFiles","addLocations","updateLocation","deleteLocation","setLocationPerson","updatePerson","deletePerson","addExif","exportAsFile","context","URL","createObjectURL","link","download","split","dispatchEvent","MouseEvent","bubbles","cancelable","view","revokeObjectURL","loadVizFile","commit","parseExif","Vuex","Store","setup","main","initFS","VueViewer","VueMeta","config","productionTip","store","render","h","App","$mount","catch","small","locked","domProps","changedProjectName","fs","BrowserFS","FileSystem","MountableFileSystem","Buffer","BFSRequire","initialize","FileFlag","mount","InMemory","mkdir","writeFile","mountZipFile","zipFile","basePath","existsSync","umount","reader","FileReader","arrayBuffer","ZipFS","from","readAsArrayBuffer","encoding","flag","contents","fname","ensureDirectory","paths","dir","mkdirSync","safeFirstDate","isSender","color","right","mimeType","onImageClick","text","mime","getExifData","exifData","ExifReader","load","lat","parseFloat","lng","tags","MD5","md5","sql","getSQL","initSqlJs","locateFile","addPeopleMeta","SQL","db","Database","each","row","chattedPerson","Contact","ContactAlias","parseMsgStore","filePromises","key_remote_jid","chatId","timestamp","key_from_me","media_caption","file_path","media_mime_type","pathParts","filename","allSettled","vizJson","parse","info","ERROR","WINDOW","root","JS_MD5_NO_WINDOW","WEB_WORKER","self","NODE_JS","JS_MD5_NO_NODE_JS","process","versions","node","global","buffer8","ARRAY_BUFFER","JS_MD5_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","EXTRA","SHIFT","OUTPUT_TYPES","BASE64_ENCODE_CHAR","blocks","Uint8Array","Uint32Array","obj","toString","JS_MD5_NO_ARRAY_BUFFER_IS_VIEW","isView","constructor","createOutputMethod","outputType","Md5","update","createMethod","method","sharedMemory","h0","h1","h2","h3","bytes","hBytes","finalized","hashed","first","notString","charCodeAt","lastByteIndex","hash","finalize","bc","da","hex","digest","array","base64","v1","v2","v3","base64Str"],"mappings":"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","file":"js/app.611aec4f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"editor\":\"editor\"}[chunkId]||chunkId) + \".\" + {\"editor\":\"914b11b2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"editor\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"editor\":\"editor\"}[chunkId]||chunkId) + \".\" + {\"editor\":\"af3a89c9\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"","import markerIcon from '@/assets/marker-icon.png';\nimport markerShadow from '@/assets/marker-shadow.png';\nimport { icon } from 'leaflet';\n\nexport default function createIcon(location, state) {\n\tlet person;\n\tif (location.person) {\n\t\tperson = state.people[location.person];\n\t}\n\n\tif (location.mediaSrc) {\n\t\treturn icon({\n\t\t\ticonUrl: state.files[location.mediaSrc],\n\t\t\ticonSize: [32, 32],\n\t\t\ticonAnchor: [16, 16],\n\t\t\ttooltipAnchor: [16, 0],\n\t\t\tpopupAnchor: [1, -34],\n\t\t\tclassName: `rounded-full shadow-lg border-2 border-gray-500 bg-white`,\n\t\t});\n\t}\n\n\treturn person\n\t\t? icon({\n\t\t\t\ticonUrl:\n\t\t\t\t\tperson.avatarUrl ||\n\t\t\t\t\t`https://avatars.dicebear.com/api/bottts/${encodeURIComponent(\n\t\t\t\t\t\tperson.name\n\t\t\t\t\t)}.svg`,\n\t\t\t\ticonSize: [32, 32],\n\t\t\t\ticonAnchor: [16, 16],\n\t\t\t\ttooltipAnchor: [16, 0],\n\t\t\t\tpopupAnchor: [1, -34],\n\t\t\t\tclassName: `rounded-full shadow-lg border-2 border-gray-500 bg-white`,\n\t\t  })\n\t\t: icon({\n\t\t\t\ticonUrl: markerIcon,\n\t\t\t\tshadowUrl: markerShadow,\n\t\t\t\ticonSize: [25, 41],\n\t\t\t\ticonAnchor: [12, 41],\n\t\t\t\tpopupAnchor: [1, -34],\n\t\t\t\ttooltipAnchor: [16, -28],\n\t\t\t\tshadowSize: [41, 41],\n\t\t  });\n}\n","export default function inspectImage(viewerApi, state, mediaSrc) {\n\tconst exif = state.exif[mediaSrc] || {};\n\n\tconst element = document.createElement('div');\n\telement.className =\n\t\t'overflow-hidden fixed top-0 right-0 mr-5 mt-10 text-base bg-gray-200 text-gray-900 rounded-md fixed min-w-5 transition opacity-60 hover:opacity-100';\n\telement.style = 'z-index: 3000; min-width: 300px;';\n\n\telement.innerHTML = `\n\t\t<h1 class=\"w-full text-sm font-semibold px-2 py-1 mr-10 bg-gray-100 flex items-center justify-between\">\n\t\t\t<span>EXIF Daten</span>\n\t\t\t<button>Anzeigen</button>\n\t\t</h1>\n\n\t\t<div class=\"overflow-y-scroll px-5 py-5 exif-tags hidden\" style=\"max-height: 500px;\">\n\t\t\t${[\n\t\t\t\t'MD5',\n\t\t\t\t'GPSLatitude',\n\t\t\t\t'GPSLongitude',\n\t\t\t\t'Latitude',\n\t\t\t\t'Longitude',\n\t\t\t\t'DateTime',\n\t\t\t\t'DateTimeOriginal',\n\t\t\t\t...Object.keys(exif),\n\t\t\t]\n\t\t\t\t.map((tagName) => {\n\t\t\t\t\tconst tag = exif[tagName];\n\n\t\t\t\t\tif (!tag) return '';\n\n\t\t\t\t\tlet tagText = tag;\n\n\t\t\t\t\tif (typeof tag === 'object' || Array.isArray(tag)) {\n\t\t\t\t\t\ttagText = JSON.stringify(tag, null, 2);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<div class=\"mb-5 font-medium\">\n\t\t\t\t\t\t\t\t<h2 class=\"text-xs text-gray-600 mb-1\">${tagName}</h2>\n\t\t\t\t\t\t\t\t<pre class=\"text-sm\">${tagText}</pre>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\t\t\t})\n\t\t\t\t.join('\\n')}\n\t\t</div>\n\t`;\n\n\telement.querySelector('button').addEventListener('click', (e) => {\n\t\tif (e.target.textContent === 'Anzeigen') {\n\t\t\te.target.textContent = 'Verstecken';\n\n\t\t\telement.querySelector('.exif-tags').classList.remove('hidden');\n\t\t} else {\n\t\t\te.target.textContent = 'Anzeigen';\n\n\t\t\telement.querySelector('.exif-tags').classList.add('hidden');\n\t\t}\n\t});\n\n\tviewerApi({\n\t\timages: [state.files[mediaSrc]],\n\t\toptions: {\n\t\t\ttoolbar: false,\n\t\t\tnavbar: false,\n\t\t\tzoomOnWheel: true,\n\t\t\thide() {\n\t\t\t\telement.remove();\n\t\t\t},\n\t\t},\n\t});\n\n\t// viewer.viewer.removeEventListener('wheel', viewer.wheel);\n\n\tsetTimeout(() => {\n\t\tdocument.querySelector('.viewer-container').after(element);\n\t}, 100);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col\",attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"app\" class=\"flex flex-col\">\n\t\t<router-view />\n\t</div>\n</template>\n<script type=\"text/javascript\">\nexport default {\n\tmetaInfo() {\n\t\tconst name = this.$store.state.setup.projectName;\n\t\treturn {\n\t\t\ttitleTemplate: () =>\n\t\t\t\tname !== 'Forensik Viz'\n\t\t\t\t\t? `${name} - Forensik Viz`\n\t\t\t\t\t: 'Forensik Viz',\n\t\t};\n\t},\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=52025c92&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map fixed w-full h-screen flex flex-col\"},[_c('Header',{attrs:{\"small\":\"\",\"locked\":\"\"},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('form',{staticClass:\"flex gap-2 px-2 items-center\",on:{\"submit\":function($event){$event.preventDefault();return _vm.loadFile.apply(null, arguments)}}},[_c('input',{ref:\"vizFile\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onVizFileChanged}}),_c('button',{staticClass:\"py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:text-blue-900 disabled:opacity-50 disabled:cursor-default\",class:{ 'hover:bg-blue-200': _vm.visFileSelected },attrs:{\"type\":\"submit\",\"disabled\":!_vm.visFileSelected}},[_vm._v(\" Laden \")]),_c('a',{staticClass:\"block py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:bg-blue-200 hover:text-blue-900\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.edit.apply(null, arguments)}}},[_vm._v(\" Bearbeiten  \")])])]},proxy:true}])}),_c('Map',{attrs:{\"locations\":_vm.currentLocations},scopedSlots:_vm._u([{key:\"control\",fn:function(){return [_c('EventControl',{attrs:{\"events\":_vm.events,\"selectedEvent\":_vm.selectedEvent},on:{\"select\":_vm.selectEvent,\"next\":_vm.next,\"previous\":_vm.previous}})]},proxy:true},{key:\"chat\",fn:function(){return [(_vm.currentChats)?_c('ChatWindow',{staticClass:\"shadow-lg\",attrs:{\"chats\":_vm.currentChats}}):_vm._e()]},proxy:true},{key:\"load\",fn:function(){return undefined},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('LMap',{ref:\"map\",attrs:{\"zoom\":_vm.zoom,\"center\":_vm.center}},[_c('LTileLayer',{attrs:{\"url\":_vm.url,\"attribution\":_vm.attribution}}),_c('LControl',{staticClass:\"w-full max-w-2xl p-3\",staticStyle:{\"width\":\"400px\"},attrs:{\"position\":'bottomright',\"disableScrollPropagation\":true}},[_vm._t(\"chat\")],2),_c('LControl',{staticClass:\"w-full max-w-xl p-5\",attrs:{\"position\":'bottomleft',\"disableScrollPropagation\":true}},[_vm._t(\"control\")],2),_c('LControl',{staticClass:\"w-full max-w-xl\",staticStyle:{\"min-width\":\"10vw\"},attrs:{\"position\":'topright'}},[_vm._t(\"load\")],2),_vm._l((_vm.mappedLocations),function(location){return _c('LMarker',{key:location.id,attrs:{\"name\":\"lolol\",\"lat-lng\":location.position,\"icon\":_vm.icon(location)},on:{\"click\":function($event){return _vm.markerClicked(location)}}},[_c('LTooltip',{attrs:{\"content\":location.description}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<LMap ref=\"map\" :zoom=\"zoom\" :center=\"center\">\n\t\t<LTileLayer :url=\"url\" :attribution=\"attribution\" />\n\t\t<LControl\n\t\t\tclass=\"w-full max-w-2xl p-3\"\n\t\t\tstyle=\"width: 400px\"\n\t\t\t:position=\"'bottomright'\"\n\t\t\t:disableScrollPropagation=\"true\"\n\t\t>\n\t\t\t<slot name=\"chat\" />\n\t\t</LControl>\n\t\t<LControl\n\t\t\t:position=\"'bottomleft'\"\n\t\t\tclass=\"w-full max-w-xl p-5\"\n\t\t\t:disableScrollPropagation=\"true\"\n\t\t>\n\t\t\t<slot name=\"control\" />\n\t\t</LControl>\n\t\t<LControl\n\t\t\t:position=\"'topright'\"\n\t\t\tclass=\"w-full max-w-xl\"\n\t\t\tstyle=\"min-width: 10vw\"\n\t\t>\n\t\t\t<slot name=\"load\" />\n\t\t</LControl>\n\n\t\t<LMarker\n\t\t\tv-for=\"location in mappedLocations\"\n\t\t\t:key=\"location.id\"\n\t\t\tname=\"lolol\"\n\t\t\t:lat-lng=\"location.position\"\n\t\t\t:icon=\"icon(location)\"\n\t\t\t@click=\"markerClicked(location)\"\n\t\t>\n\t\t\t<LTooltip :content=\"location.description\" />\n\t\t</LMarker>\n\t</LMap>\n</template>\n\n<script>\nimport 'leaflet/dist/leaflet.css';\nimport { latLng } from 'leaflet';\nimport { LMap, LTileLayer, LControl, LMarker, LTooltip } from 'vue2-leaflet';\n\nimport createIcon from '@/util/create-icon';\nimport inspectImage from '@/util/inspect-image';\n\nexport default {\n\tprops: {\n\t\tlocations: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tname: 'Example',\n\tcomponents: {\n\t\tLMap,\n\t\tLTileLayer,\n\t\tLControl,\n\t\tLMarker,\n\t\tLTooltip,\n\t},\n\tmounted() {\n\t\tthis.recalculateBounds();\n\t},\n\tcomputed: {\n\t\tmappedLocations() {\n\t\t\tconsole.log(this.locations, this.$store.state.setup.locations);\n\t\t\treturn this.locations\n\t\t\t\t.map((location) => this.$store.state.setup.locations[location])\n\t\t\t\t.filter((location) => !!location);\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tzoom: 6,\n\t\t\tcenter: latLng(51.38619, 10.56072),\n\t\t\turl: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n\t\t\tattribution:\n\t\t\t\t'&copy; <a href=\"https://mateffy.me\">Lukas Mateffy</a> & <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n\t\t};\n\t},\n\tmethods: {\n\t\tmarkerClicked(location) {\n\t\t\tif (location.mediaSrc) {\n\t\t\t\tinspectImage(\n\t\t\t\t\tthis.$viewerApi,\n\t\t\t\t\tthis.$store.state.setup,\n\t\t\t\t\tlocation.mediaSrc\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\trecalculateBounds() {\n\t\t\tif (this.locations.length === 0) return;\n\t\t\tconst bounds = this.mappedLocations.map((location) => [\n\t\t\t\tlocation.position.lat,\n\t\t\t\tlocation.position.lng,\n\t\t\t]);\n\n\t\t\tthis.$refs.map.fitBounds(bounds, {\n\t\t\t\tpadding: [50, 50],\n\t\t\t\tmaxZoom: 14,\n\t\t\t});\n\t\t},\n\t\ticon(location) {\n\t\t\treturn createIcon(location, this.$store.state.setup);\n\t\t},\n\t},\n\twatch: {\n\t\tlocations() {\n\t\t\tthis.recalculateBounds();\n\t\t},\n\t},\n};\n</script>\n\n<style>\n.example-custom-control {\n\tbackground: #fff;\n\tpadding: 0 0.5em;\n\tborder: 1px solid #aaa;\n\tborder-radius: 0.1em;\n}\n.custom-control-watermark {\n\tfont-size: 200%;\n\tfont-weight: bolder;\n\tcolor: #aaa;\n\ttext-shadow: #555;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=20942624&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-gray-200 rounded-lg px-3 py-3 flex flex-col gap-3 w-full max-w-md shadow-md\",staticStyle:{\"min-width\":\"500px\"}},[(_vm.selectedEvent)?_c('div',{staticClass:\"flex flex-col\"},[_c('h1',{staticClass:\"text-lg font-bold\"},[_vm._v(_vm._s(_vm.selectedEvent.title))]),_c('h2',{staticClass:\"text-base font-medium text-gray-500\"},[_vm._v(\" \"+_vm._s(new Date(_vm.selectedEvent.start).toLocaleString())+\" \"),_c('span',{staticClass:\"text-gray-400\"},[_vm._v(\"\")]),_vm._v(\" \"+_vm._s(_vm.isSameDay(_vm.selectedEvent.start, _vm.selectedEvent.end) ? new Date(_vm.selectedEvent.end).toLocaleTimeString() : new Date(_vm.selectedEvent.end).toLocaleString())+\" \")])]):_vm._e(),_c('Timeline',{ref:\"timeline\",attrs:{\"items\":_vm.timelineEvents,\"options\":_vm.options,\"events\":['select'],\"selection\":_vm.selectedEventId},on:{\"select\":_vm.onEventSelect}}),_c('div',{staticClass:\"w-full flex\"},[_c('button',{staticClass:\"rounded-l bg-gray-500 text-gray-100 hover:bg-gray-600 active:bg-gray-700 px-2 py-2 flex-1\",on:{\"click\":function($event){return _vm.$emit('previous')}}},[_c('i',{staticClass:\"el-icon-arrow-left el-icon-left\"}),_vm._v(\" Vorheriges Event \")]),_c('button',{staticClass:\"rounded-r bg-gray-500 text-gray-100 hover:bg-gray-600 active:bg-gray-700 px-2 py-2 flex-1\",on:{\"click\":function($event){return _vm.$emit('next')}}},[_vm._v(\" Nchstes Event \"),_c('i',{staticClass:\"el-icon-arrow-right\"})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div\n\t\tclass=\"bg-gray-200 rounded-lg px-3 py-3 flex flex-col gap-3 w-full max-w-md shadow-md\"\n\t\tstyle=\"min-width: 500px\"\n\t>\n\t\t<div class=\"flex flex-col\" v-if=\"selectedEvent\">\n\t\t\t<h1 class=\"text-lg font-bold\">{{ selectedEvent.title }}</h1>\n\t\t\t<h2 class=\"text-base font-medium text-gray-500\">\n\t\t\t\t{{ new Date(selectedEvent.start).toLocaleString() }}\n\t\t\t\t<span class=\"text-gray-400\"></span>\n\t\t\t\t{{\n\t\t\t\t\tisSameDay(selectedEvent.start, selectedEvent.end)\n\t\t\t\t\t\t? new Date(selectedEvent.end).toLocaleTimeString()\n\t\t\t\t\t\t: new Date(selectedEvent.end).toLocaleString()\n\t\t\t\t}}\n\t\t\t</h2>\n\t\t</div>\n\t\t<Timeline\n\t\t\t:items=\"timelineEvents\"\n\t\t\t:options=\"options\"\n\t\t\t:events=\"['select']\"\n\t\t\t:selection=\"selectedEventId\"\n\t\t\tref=\"timeline\"\n\t\t\t@select=\"onEventSelect\"\n\t\t/>\n\t\t<div class=\"w-full flex\">\n\t\t\t<button\n\t\t\t\tclass=\"rounded-l bg-gray-500 text-gray-100 hover:bg-gray-600 active:bg-gray-700 px-2 py-2 flex-1\"\n\t\t\t\t@click=\"$emit('previous')\"\n\t\t\t>\n\t\t\t\t<i class=\"el-icon-arrow-left el-icon-left\" />\n\t\t\t\tVorheriges Event\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"rounded-r bg-gray-500 text-gray-100 hover:bg-gray-600 active:bg-gray-700 px-2 py-2 flex-1\"\n\t\t\t\t@click=\"$emit('next')\"\n\t\t\t>\n\t\t\t\tNchstes Event\n\t\t\t\t<i class=\"el-icon-arrow-right\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport { Timeline } from 'vue-visjs';\n\nexport default {\n\tprops: {\n\t\tevents: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedEvent: {\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tmounted() {\n\t\t// Selection in Timeline component doesn't get set on initial render.\n\t\t// We do it manually here\n\t\tif (this.selectedEvent)\n\t\t\tthis.$refs.timeline.setSelection(this.selectedEvent.id);\n\t},\n\tcomponents: {\n\t\tTimeline,\n\t},\n\tcomputed: {\n\t\tselectedEventId() {\n\t\t\treturn this.selectedEvent ? this.selectedEvent.id : null;\n\t\t},\n\t\ttimelineEvents() {\n\t\t\treturn this.$store.getters['setup/eventList'];\n\t\t},\n\t\toptions: () => ({\n\t\t\teditable: false,\n\t\t\t// height: 95,\n\t\t\t// minHeight: 95,\n\t\t\twidth: '100%',\n\t\t\tstack: false,\n\t\t\talign: 'left',\n\t\t\ttype: 'range',\n\t\t}),\n\t},\n\tmethods: {\n\t\tonEventSelect({ items }) {\n\t\t\tthis.$emit('select', items[0]);\n\t\t\tthis.$refs.timeline.focus(items[0]);\n\t\t},\n\n\t\tisSameDay(date1, date2) {\n\t\t\treturn (\n\t\t\t\tnew Date(date1).toISOString().slice(0, 10) ===\n\t\t\t\tnew Date(date2).toISOString().slice(0, 10)\n\t\t\t);\n\t\t},\n\t},\n\twatch: {\n\t\tselectedEvent() {\n\t\t\tif (this.selectedEvent) {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tthis.$refs.timeline.setSelection(this.selectedEvent.id);\n\t\t\t\t\tthis.$refs.timeline.focus(this.selectedEvent.id);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n};\n</script>\n<style type=\"text/css\">\n.vis-content {\n\t/*min-height: 95px;*/\n}\n\n.vis-timeline {\n\tborder-radius: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EventControl.vue?vue&type=template&id=5c5154e2&\"\nimport script from \"./EventControl.vue?vue&type=script&lang=js&\"\nexport * from \"./EventControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventControl.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col w-full bg-gray-100 bg-opacity-80 rounded-lg overflow-hidden\",staticStyle:{\"max-height\":\"70vh\"}},[(_vm.selectedChat)?[_c('button',{class:(\"w-full bg-\" + _vm.selectedColor + \"-300 text-\" + _vm.selectedColor + \"-900 py-1 hover:opacity-90\"),on:{\"click\":function($event){_vm.chatHidden = !_vm.chatHidden}}},[(_vm.chatHidden)?_c('span',[_vm._v(\" Anzeigen \"),_c('i',{staticClass:\"el-icon-arrow-up\"})]):_c('span',[_vm._v(\" Schlieen \"),_c('i',{staticClass:\"el-icon-arrow-down\"})])]),_c('div',{class:(\"flex justify-between items-center px-2 py-1 text-xs bg-\" + _vm.selectedColor + \"-200 text-\" + _vm.selectedColor + \"-800\")},[_c('div',{staticClass:\"flex items-center gap-2\"},[_c('img',{staticClass:\"h-4 w-4 rounded-full\",attrs:{\"src\":_vm.receiver.avatarUrl ||\n\t\t\t\t\t\t(\"https://avatars.dicebear.com/api/bottts/\" + (encodeURIComponent(\n\t\t\t\t\t\t\t_vm.receiver.name\n\t\t\t\t\t\t)) + \".svg\")}}),_vm._v(\" \"+_vm._s(_vm.receiver.name)+\" \")]),_c('div',{staticClass:\"flex items-center gap-2\"},[_vm._v(\" \"+_vm._s(_vm.sender.name)+\" \"),_c('img',{staticClass:\"h-4 w-4 rounded-full\",attrs:{\"src\":_vm.sender.avatarUrl ||\n\t\t\t\t\t\t(\"https://avatars.dicebear.com/api/bottts/\" + (encodeURIComponent(\n\t\t\t\t\t\t\t_vm.sender.name\n\t\t\t\t\t\t)) + \".svg\")}})])]),_c('Chat',{staticClass:\"w-full transition-all p-2\",style:(_vm.chatHidden\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t'max-height': '0px',\n\t\t\t\t\t\t\tpaddingTop: 0,\n\t\t\t\t\t\t\tpaddingBottom: 0,\n\t\t\t\t\t  }\n\t\t\t\t\t: { 'max-height': '70vh' }),attrs:{\"sender\":_vm.sender,\"receiver\":_vm.receiver,\"messages\":_vm.messages,\"color\":_vm.selectedColor}})]:_vm._e(),_c('nav',{staticClass:\"w-full flex justify-around\"},_vm._l((_vm.chatList),function(chat){return _c('TabButton',{key:chat.id,style:((\"max-width: \" + (100 / _vm.chatList.length) + \"%\")),attrs:{\"color\":_vm.chatColor(chat.type),\"count\":_vm.filterMessagesForEvent(chat.messages, _vm.selectedEvent).length,\"active\":_vm.selectedChat.id === chat.id},on:{\"click\":function($event){return _vm.selectChat(chat)}}},[_c('div',{staticClass:\"flex flex-col text-left flex-shrink-1 truncate overflow-ellipsis overflow-hidden\"},[_c('div',{staticClass:\"truncate\"},[_vm._v(\" \"+_vm._s(_vm.toPerson(chat.receiver).name)+\" \")]),_c('div',{class:(\"text-xs text-\" + _vm.selectedColor + \"-600\")},[_vm._v(\" \"+_vm._s(_vm.chatName(chat.type))+\" \")])])])}),1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function filterMessagesForEvent(messages, event) {\n\treturn messages.filter(\n\t\t(message) =>\n\t\t\tmessage.date.toISOString() >= event.start.toISOString() &&\n\t\t\tmessage.date.toISOString() <= event.end.toISOString()\n\t);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:_vm.classes,attrs:{\"disabled\":_vm.count === 0},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},[_vm._t(\"default\"),_c('span',{class:_vm.countClasses},[_vm._v(_vm._s(_vm.count))])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<button\n\t\t:class=\"classes\"\n\t\t:disabled=\"count === 0\"\n\t\t@click=\"$emit('click', $event)\"\n\t>\n\t\t<slot />\n\t\t<span :class=\"countClasses\">{{ count }}</span>\n\t</button>\n</template>\n<script type=\"text/javascript\">\nexport default {\n\tprops: {\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'gray',\n\t\t},\n\t\tcount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tclasses() {\n\t\t\treturn `bg-${this.color}-300 text-${\n\t\t\t\tthis.color\n\t\t\t}-900 flex-1 py-2 flex gap-2 items-center justify-between px-3 disabled:opacity-50 disabled:cursor-not-allowed font-medium ${\n\t\t\t\tthis.active ? '' : 'opacity-70 hover:opacity-90'\n\t\t\t}`;\n\t\t},\n\t\tcountClasses() {\n\t\t\treturn `bg-${this.color}-200 text-${this.color}-800 h-5 px-1 min-w-5 rounded-full inline-block flex items-center justify-center font-mono font-bold`;\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabButton.vue?vue&type=template&id=e1b51682&\"\nimport script from \"./TabButton.vue?vue&type=script&lang=js&\"\nexport * from \"./TabButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div\n\t\tclass=\"flex flex-col w-full bg-gray-100 bg-opacity-80 rounded-lg overflow-hidden\"\n\t\tstyle=\"max-height: 70vh\"\n\t>\n\t\t<template v-if=\"selectedChat\">\n\t\t\t<button\n\t\t\t\t:class=\"`w-full bg-${selectedColor}-300 text-${selectedColor}-900 py-1 hover:opacity-90`\"\n\t\t\t\t@click=\"chatHidden = !chatHidden\"\n\t\t\t>\n\t\t\t\t<span v-if=\"chatHidden\">\n\t\t\t\t\tAnzeigen\n\t\t\t\t\t<i class=\"el-icon-arrow-up\" />\n\t\t\t\t</span>\n\t\t\t\t<span v-else>\n\t\t\t\t\tSchlieen\n\t\t\t\t\t<i class=\"el-icon-arrow-down\" />\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<div\n\t\t\t\t:class=\"`flex justify-between items-center px-2 py-1 text-xs bg-${selectedColor}-200 text-${selectedColor}-800`\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded-full\"\n\t\t\t\t\t\t:src=\"\n\t\t\t\t\t\t\treceiver.avatarUrl ||\n\t\t\t\t\t\t\t`https://avatars.dicebear.com/api/bottts/${encodeURIComponent(\n\t\t\t\t\t\t\t\treceiver.name\n\t\t\t\t\t\t\t)}.svg`\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t{{ receiver.name }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t{{ sender.name }}\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded-full\"\n\t\t\t\t\t\t:src=\"\n\t\t\t\t\t\t\tsender.avatarUrl ||\n\t\t\t\t\t\t\t`https://avatars.dicebear.com/api/bottts/${encodeURIComponent(\n\t\t\t\t\t\t\t\tsender.name\n\t\t\t\t\t\t\t)}.svg`\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Chat\n\t\t\t\tclass=\"w-full transition-all p-2\"\n\t\t\t\t:style=\"\n\t\t\t\t\tchatHidden\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t'max-height': '0px',\n\t\t\t\t\t\t\t\tpaddingTop: 0,\n\t\t\t\t\t\t\t\tpaddingBottom: 0,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: { 'max-height': '70vh' }\n\t\t\t\t\"\n\t\t\t\t:sender=\"sender\"\n\t\t\t\t:receiver=\"receiver\"\n\t\t\t\t:messages=\"messages\"\n\t\t\t\t:color=\"selectedColor\"\n\t\t\t/>\n\t\t</template>\n\t\t<nav class=\"w-full flex justify-around\">\n\t\t\t<TabButton\n\t\t\t\tv-for=\"chat in chatList\"\n\t\t\t\t:key=\"chat.id\"\n\t\t\t\t:color=\"chatColor(chat.type)\"\n\t\t\t\t:count=\"\n\t\t\t\t\tfilterMessagesForEvent(chat.messages, selectedEvent).length\n\t\t\t\t\"\n\t\t\t\t:active=\"selectedChat.id === chat.id\"\n\t\t\t\t@click=\"selectChat(chat)\"\n\t\t\t\t:style=\"`max-width: ${100 / chatList.length}%`\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex flex-col text-left flex-shrink-1 truncate overflow-ellipsis overflow-hidden\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"truncate\">\n\t\t\t\t\t\t{{ toPerson(chat.receiver).name }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :class=\"`text-xs text-${selectedColor}-600`\">\n\t\t\t\t\t\t{{ chatName(chat.type) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- \n\t\t\t\t\ttext-gray-100 text-gray-200 text-gray-300 text-gray-400 text-gray-500 text-gray-600 text-gray-700 text-gray-800 text-gray-900\n\t\t\t\t\ttext-purple-100 text-purple-200 text-purple-300 text-purple-400 text-purple-500 text-purple-600 text-purple-700 text-purple-800 text-purple-900\n\t\t\t\t\ttext-green-100 text-green-200 text-green-300 text-green-400 text-green-500 text-green-600 text-green-700 text-green-800 text-green-900\n\t\t\t\t\ttext-blue-100 text-blue-200 text-blue-300 text-blue-400 text-blue-500 text-blue-600 text-blue-700 text-blue-800 text-blue-900\n\t\t\t\t\ttext-indigo-100 text-indigo-200 text-indigo-300 text-indigo-400 text-indigo-500 text-indigo-600 text-indigo-700 text-indigo-800 text-indigo-900\n\t\t\t\t\ttext-yellow-100 text-yellow-200 text-yellow-300 text-yellow-400 text-yellow-500 text-yellow-600 text-yellow-700 text-yellow-800 text-yellow-900\n\n\t\t\t\t\tbg-gray-100 bg-gray-200 bg-gray-300 bg-gray-400 bg-gray-500 bg-gray-600 bg-gray-700 bg-gray-800 bg-gray-900\n\t\t\t\t\tbg-purple-100 bg-purple-200 bg-purple-300 bg-purple-400 bg-purple-500 bg-purple-600 bg-purple-700 bg-purple-800 bg-purple-900\n\t\t\t\t\tbg-green-100 bg-green-200 bg-green-300 bg-green-400 bg-green-500 bg-green-600 bg-green-700 bg-green-800 bg-green-900\n\t\t\t\t\tbg-blue-100 bg-blue-200 bg-blue-300 bg-blue-400 bg-blue-500 bg-blue-600 bg-blue-700 bg-blue-800 bg-blue-900\n\t\t\t\t\tbg-indigo-100 bg-indigo-200 bg-indigo-300 bg-indigo-400 bg-indigo-500 bg-indigo-600 bg-indigo-700 bg-indigo-800 bg-indigo-900\n\t\t\t\t\tbg-yellow-100 bg-yellow-200 bg-yellow-300 bg-yellow-400 bg-yellow-500 bg-yellow-600 bg-yellow-700 bg-yellow-800 bg-yellow-900\n\t\t\t\t -->\n\t\t\t</TabButton>\n\t\t</nav>\n\t</div>\n</template>\n<script type=\"text/javascript\">\nimport filterMessagesForEvent from '@/util/filter-messages-for-event';\nimport TabButton from './TabButton';\nimport Chat from './Chat';\n\nexport default {\n\tprops: {\n\t\tchats: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchatHidden: false,\n\t\t\tselectedChat: null,\n\t\t};\n\t},\n\tbeforeMount() {\n\t\tthis.selectedChat = this.chatList[0];\n\t},\n\tcomputed: {\n\t\tchatList() {\n\t\t\treturn this.chats.map(\n\t\t\t\t(chatId) => this.$store.state.setup.chats[chatId]\n\t\t\t);\n\t\t},\n\t\tselectedEvent() {\n\t\t\treturn this.$store.state.setup.events[\n\t\t\t\tthis.$store.state.map.selectedEventId\n\t\t\t];\n\t\t},\n\t\tmessages() {\n\t\t\tif (!this.selectedChat) return null;\n\n\t\t\tconst messages = filterMessagesForEvent(\n\t\t\t\tthis.selectedChat.messages,\n\t\t\t\tthis.selectedEvent\n\t\t\t);\n\n\t\t\treturn messages;\n\t\t},\n\t\tsender() {\n\t\t\treturn this.$store.state.setup.people[this.selectedChat.sender];\n\t\t},\n\t\treceiver() {\n\t\t\treturn this.$store.state.setup.people[this.selectedChat.receiver];\n\t\t},\n\t\tselectedColor() {\n\t\t\treturn this.chatColor(\n\t\t\t\tthis.selectedChat ? this.selectedChat.type : ''\n\t\t\t);\n\t\t},\n\t},\n\tcomponents: {\n\t\tChat,\n\t\tTabButton,\n\t},\n\tmethods: {\n\t\tfilterMessagesForEvent,\n\t\ttoPerson(id) {\n\t\t\treturn (\n\t\t\t\tthis.$store.state.setup.people[id] ||\n\t\t\t\tthis.$store.state.setup.people[id]\n\t\t\t);\n\t\t},\n\t\tselectChat(chat) {\n\t\t\tthis.selectedChat = chat;\n\t\t},\n\t\tchatColor(chatType) {\n\t\t\tswitch (chatType) {\n\t\t\t\tcase 'whatsapp':\n\t\t\t\t\treturn 'green';\n\t\t\t\tcase 'sms':\n\t\t\t\t\treturn 'purple';\n\t\t\t\tcase 'phonelog':\n\t\t\t\t\treturn 'pink';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'gray';\n\t\t\t}\n\t\t},\n\t\tchatName(chatType) {\n\t\t\tswitch (chatType) {\n\t\t\t\tcase 'whatsapp':\n\t\t\t\t\treturn 'WhatsApp';\n\t\t\t\tcase 'sms':\n\t\t\t\t\treturn 'SMS';\n\t\t\t\tcase 'phonelog':\n\t\t\t\t\treturn 'Phone Calls';\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\tchats() {\n\t\t\t// If chats are updated we try to find the old selected chat id, or select the first one\n\t\t\tif (!this.selectedChat) return;\n\n\t\t\tthis.selectedChat =\n\t\t\t\tthis.chatList.find(\n\t\t\t\t\t(chat) => chat.id === this.selectedChat.id\n\t\t\t\t) || this.chatList[0];\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatWindow.vue?vue&type=template&id=29d7f86f&\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"map fixed w-full h-screen flex flex-col\">\n\t\t<Header small locked>\n\t\t\t<template v-slot:actions>\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex gap-2 px-2 items-center\"\n\t\t\t\t\t@submit.prevent=\"loadFile\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tref=\"vizFile\"\n\t\t\t\t\t\t@change=\"onVizFileChanged\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:text-blue-900 disabled:opacity-50 disabled:cursor-default\"\n\t\t\t\t\t\t:class=\"{ 'hover:bg-blue-200': visFileSelected }\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:disabled=\"!visFileSelected\"\n\t\t\t\t\t>\n\t\t\t\t\t\tLaden\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tclass=\"block py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:bg-blue-200 hover:text-blue-900\"\n\t\t\t\t\t\t@click.prevent=\"edit\"\n\t\t\t\t\t>\n\t\t\t\t\t\tBearbeiten \n\t\t\t\t\t</a>\n\t\t\t\t</form>\n\t\t\t</template>\n\t\t</Header>\n\n\t\t<Map :locations=\"currentLocations\">\n\t\t\t<template v-slot:control>\n\t\t\t\t<EventControl\n\t\t\t\t\t:events=\"events\"\n\t\t\t\t\t:selectedEvent=\"selectedEvent\"\n\t\t\t\t\t@select=\"selectEvent\"\n\t\t\t\t\t@next=\"next\"\n\t\t\t\t\t@previous=\"previous\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t\t<template v-slot:chat>\n\t\t\t\t<ChatWindow\n\t\t\t\t\tv-if=\"currentChats\"\n\t\t\t\t\tclass=\"shadow-lg\"\n\t\t\t\t\t:chats=\"currentChats\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<template v-slot:load> </template>\n\t\t</Map>\n\t</div>\n</template>\n<script>\nimport Header from '@/components/layout/Header';\nimport Map from '@/components/map/Map';\nimport EventControl from '@/components/events/EventControl';\nimport ChatWindow from '@/components/chat/ChatWindow';\n\nexport default {\n\tcomponents: {\n\t\tHeader,\n\t\tMap,\n\t\tEventControl,\n\t\tChatWindow,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvisFileSelected: false,\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.selectEvent(this.events.length > 0 ? this.events[0].id : null);\n\t},\n\tcomputed: {\n\t\tselectedEventId() {\n\t\t\treturn this.$store.state.map.selectedEventId;\n\t\t},\n\t\teventsObj() {\n\t\t\treturn this.$store.state.setup.events;\n\t\t},\n\t\tevents() {\n\t\t\treturn this.$store.getters['setup/eventList'];\n\t\t},\n\t\tselectedEvent() {\n\t\t\tif (!this.selectedEventId) return null;\n\n\t\t\treturn this.eventsObj[this.selectedEventId];\n\t\t},\n\t\tcurrentChats() {\n\t\t\tif (!this.selectedEvent) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.selectedEvent.chats;\n\t\t},\n\t\tcurrentLocations() {\n\t\t\tif (!this.selectedEvent) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.selectedEvent.locations;\n\t\t},\n\t},\n\tmethods: {\n\t\tonVizFileChanged() {\n\t\t\tthis.visFileSelected = this.$refs.vizFile.files.length > 0;\n\t\t},\n\t\tloadFile() {\n\t\t\tthis.$store.dispatch('setup/loadFile', this.$refs.vizFile.files[0]);\n\t\t},\n\t\tedit() {\n\t\t\tthis.$router.push('/editor');\n\t\t},\n\t\tselectEvent(eventId) {\n\t\t\tthis.$store.commit('map/selectEvent', eventId);\n\t\t},\n\t\tnext() {\n\t\t\tlet index = this.events.findIndex(\n\t\t\t\t(e) => e.id === this.selectedEventId\n\t\t\t);\n\n\t\t\tif (index === -1 || ++index >= this.events.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectEvent(this.events[index].id);\n\t\t},\n\t\tprevious() {\n\t\t\tlet index = this.events.findIndex(\n\t\t\t\t(e) => e.id === this.selectedEventId\n\t\t\t);\n\n\t\t\tif (index === -1 || --index < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectEvent(this.events[index].id);\n\t\t},\n\t},\n\twatch: {\n\t\teventsObj() {\n\t\t\tthis.selectEvent(this.events.length > 0 ? this.events[0].id : null);\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=68b11200&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Map from '../views/Map.vue';\n\nVue.use(VueRouter);\n\nconst routes = [\n\t{\n\t\tpath: '/',\n\t\tname: 'Map',\n\t\tcomponent: Map,\n\t},\n\t{\n\t\tpath: '/editor',\n\t\tname: 'Editor',\n\t\t// route level code-splitting\n\t\t// this generates a separate chunk (about.[hash].js) for this route\n\t\t// which is lazy-loaded when the route is visited.\n\t\tcomponent: () =>\n\t\t\timport(/* webpackChunkName: \"editor\" */ '../views/Editor.vue'),\n\t},\n];\n\nconst router = new VueRouter({\n\troutes,\n});\n\nexport default router;\n","// import { getExampleData } from '@/util/example-data';\n/**\n * @typedef {Person}\n */\n\n// const { people, events } = getExampleData();\n\nexport default {\n\tnamespaced: true,\n\tstate: () => ({\n\t\tselectedEventId: null,\n\t}),\n\tmutations: {\n\t\tselectEvent(state, id) {\n\t\t\tstate.selectedEventId = id;\n\t\t},\n\t},\n\tactions: {},\n};\n","// eslint-disable-file no-undef\n// import zip from '@zip.js/zip.js';\nimport { readFile } from '@/fs';\n\nlet zip = window.zip;\nconsole.log(zip);\n\n// zip.configure({\n// \t// useWebWorkers: false,\n// });\n//\n\n// async function addFileRecursive(zipWriter, file, blob) {\n\n// }\n\nexport async function exportAsZip(state) {\n\tconst inputBlob = new Blob(\n\t\t[JSON.stringify({ ...state, files: undefined }, null, 2)],\n\t\t{ type: 'application/json' }\n\t);\n\tconst blobWriter = new zip.BlobWriter('application/zip');\n\tconst zipWriter = new zip.ZipWriter(blobWriter);\n\tawait zipWriter.add('Viz.json', new zip.BlobReader(inputBlob));\n\n\tfor (const chat of Object.values(state.chats)) {\n\t\tconsole.log(chat);\n\n\t\tfor (const message of chat.messages) {\n\t\t\tconsole.log(message);\n\n\t\t\tif (message.mediaSrc) {\n\t\t\t\ttry {\n\t\t\t\t\tconst file = await readFile(\n\t\t\t\t\t\tmessage.mediaSrc.replace('Media/', '/assets/Media/'),\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t\tconst blob = new Blob([file.buffer], {\n\t\t\t\t\t\ttype: 'image/jpeg',\n\t\t\t\t\t});\n\t\t\t\t\tawait zipWriter.add(\n\t\t\t\t\t\tmessage.mediaSrc,\n\t\t\t\t\t\tnew zip.BlobReader(blob)\n\t\t\t\t\t);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('could not add file', e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tawait zipWriter.close();\n\n\treturn blobWriter.getData();\n}\n","import { v4 as uuid } from 'uuid';\nimport Vue from 'vue';\n\nimport { loadVizFile } from '@/data-import';\nimport { exportAsZip } from '@/data-export';\n\n/**\n * @typedef {Person}\n */\n\n// const personA = {\n// \tid: '601cff75-9252-4086-998b-8938209ed879',\n// \tname: 'Markus Gasleiter',\n// \tavatarUrl: null,\n// \tcolor: 'green',\n// };\n// const personB = {\n// \tid: '1ed7504b-35bd-41b7-b8d7-38149b8a027c',\n// \tname: 'Frank Susmann',\n// \tavatarUrl:\n// \t\tnull,\n// \tcolor: 'purple',\n// };\n// const people = {\n// \t[personA.id]: personA,\n// \t[personB.id]: personB,\n// };\n\n// const locations = {\n// \t'l-1': {\n// \t\tid: 'l-1',\n// \t\tposition: { lat: 53.228093, lng: 10.373144 },\n// \t\tdate: new Date('2021-10-01 15:50:00'),\n// \t\tperson: personA.id,\n// \t\tdescription: `Haus von ${personA.name}`,\n// \t},\n// \t'l-2': {\n// \t\tid: 'l-2',\n// \t\tposition: { lat: 53.232634, lng: 10.393671 },\n// \t\tdate: new Date('2021-10-01 16:22:00'),\n// \t\tperson: personB.id,\n// \t\tdescription: `Arbeit von ${personB.name}`,\n// \t},\n// \t'l-3': {\n// \t\tid: 'l-3',\n// \t\tposition: { lat: 53.228909, lng: 10.401397 },\n// \t\tdate: new Date('2021-10-01 18:30:00'),\n// \t\tperson: personA.id,\n// \t\tdescription: `Kiosk von ${personA.name}`,\n// \t},\n\n// \t'l-4': {\n// \t\tid: 'l-4',\n// \t\tposition: { lat: 53.249013, lng: 10.361813 },\n// \t\tdate: new Date('2021-10-04 15:45:00'),\n// \t\tperson: personB.id,\n// \t\tdescription: `${personB.name} bei Gromutter`,\n// \t},\n// \t'l-5': {\n// \t\tid: 'l-5',\n// \t\tposition: { lat: 53.228093, lng: 10.373144 },\n// \t\tdescription: `Haus von ${personA.name}`,\n// \t},\n// \t'l-6': {\n// \t\tid: 'l-6',\n// \t\tposition: { lat: 53.228909, lng: 10.401397 },\n// \t\tdate: new Date('2021-10-05 01:30:00'),\n// \t\tperson: personA.id,\n// \t\tdescription: `${personA.name} im Kiosk`,\n// \t},\n// };\n\n// // const chats = {\n// // \t'whatsapp-a': {\n// // \t\tid: 'whatsapp-a',\n// // \t\ttype: 'whatsapp',\n// // \t\treceiver: personB.id,\n// // \t\tsender: personA.id,\n// // \t\tmessages: [\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-01 16:10:00'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Ey yo kannst du heute noch die Schicht bernehmen?',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-01 16:23:00'),\n// // \t\t\t\tsender: personB.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Sorry bin grade auf Arbeit angekommen, wird heute nix ',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-01 16:40:02'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'image',\n// // \t\t\t\tmediaSrc:\n// // \t\t\t\t\t'https://image.spreadshirtmedia.net/image-server/v1/mp/products/T1459A839PA4459PT28D129372714FS7416/views/1,width=378,height=378,appearanceId=839,backgroundColor=F2F2F2/mittelfinger-fuck-you-sticker.jpg',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-01 16:40:03'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Ach halt doch die Schnauze',\n// // \t\t\t},\n\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:12:00'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'image',\n// // \t\t\t\tmediaSrc:\n// // \t\t\t\t\t'https://c0.thejournal.ie/media/2013/11/products-390x285.jpg',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:12:30'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'DU WICHSER ICH SCHIEB DIR DIE BULLEN AN DEN HALS',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:31:30'),\n// // \t\t\t\tsender: personB.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Was laberst du?? Ich war das nich',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:45:30'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Erzhl das doch den Bullen hahaha du bist so gefickt',\n// // \t\t\t},\n// // \t\t],\n// // \t},\n// // \t'sms-a': {\n// // \t\tid: 'sms-a',\n// // \t\ttype: 'sms',\n// // \t\treceiver: personB.id,\n// // \t\tsender: personA.id,\n// // \t\tmessages: [\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:12:00'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'image',\n// // \t\t\t\tmediaSrc:\n// // \t\t\t\t\t'https://c0.thejournal.ie/media/2013/11/products-390x285.jpg',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:12:30'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'DU WICHSER ICH SCHIEB DIR DIE BULLEN AN DEN HALS',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:31:30'),\n// // \t\t\t\tsender: personB.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Was laberst du?? Ich war das nich',\n// // \t\t\t},\n// // \t\t\t{\n// // \t\t\t\tid: uuid(),\n// // \t\t\t\tdate: new Date('2021-10-05 10:45:30'),\n// // \t\t\t\tsender: personA.id,\n// // \t\t\t\ttype: 'text',\n// // \t\t\t\ttext: 'Erzhl das doch den Bullen hahaha du bist so gefickt',\n// // \t\t\t},\n// // \t\t],\n// // \t},\n// // };\n\n// // const { people, events } = getExampleData();\n\n// const event = {\n// \tid: uuid(),\n// \ttitle: 'Frank und Markus klren Arbeitszeiten',\n// \tstart: new Date(),\n// \tend: new Date(Date.now() + 1000 * 60 * 60),\n// \tchats: [],\n// \tlocations: [],\n// };\n\nexport default {\n\tnamespaced: true,\n\tstate: () => ({\n\t\tprojectName: 'Forensik Viz',\n\t\tpeople: {},\n\t\tchats: {},\n\t\tlocations: {},\n\t\tevents: {\n\t\t\t// [event.id]: event\n\t\t},\n\t\tfiles: {},\n\t\texif: {},\n\t}),\n\tgetters: {\n\t\teventList(state) {\n\t\t\treturn Object.values(state.events)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tconst aStart = a.start;\n\t\t\t\t\tconst bStart = b.start;\n\n\t\t\t\t\tif (aStart < bStart) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t} else if (aStart > bStart) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.map((event) => ({\n\t\t\t\t\t...event,\n\t\t\t\t\tcontent: event.title,\n\t\t\t\t}));\n\t\t},\n\t},\n\tmutations: {\n\t\tsetViz(state, viz) {\n\t\t\tstate.projectName = viz.projectName || 'Forensik Viz';\n\t\t\tstate.people = viz.people || {};\n\t\t\tstate.chats = viz.chats || {};\n\t\t\tstate.locations = viz.locations || {};\n\t\t\tstate.events = viz.events || {};\n\t\t\tstate.files = viz.files || {};\n\t\t\tstate.exif = viz.exif || {};\n\t\t},\n\n\t\tsetProjectName(state, name) {\n\t\t\tstate.projectName = name;\n\t\t},\n\n\t\t/*\n\t\t * Events\n\t\t */\n\t\tupdateEvent(state, event) {\n\t\t\tVue.set(state.events, event.id, event);\n\t\t},\n\n\t\tdeleteEvent(state, eventId) {\n\t\t\tVue.delete(state.events, eventId);\n\t\t},\n\n\t\tduplicateEvent(state, eventId) {\n\t\t\tconst oldEvent = state.events[eventId];\n\t\t\tlet event = {\n\t\t\t\t...oldEvent,\n\t\t\t\tlocations: [...oldEvent.locations],\n\t\t\t\tchats: [...oldEvent.chats],\n\t\t\t\tid: uuid(),\n\t\t\t};\n\n\t\t\tVue.set(state.events, event.id, event);\n\t\t},\n\n\t\ttoggleEventLocation(state, { event, location }) {\n\t\t\tevent = state.events[event.id];\n\n\t\t\tif (!event.locations.includes(location.id)) {\n\t\t\t\tevent.locations.push(location.id);\n\t\t\t} else {\n\t\t\t\tconst index = event.locations.indexOf(location.id);\n\n\t\t\t\tif (index !== -1) event.locations.splice(index, 1);\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Chats\n\t\t */\n\t\taddChats(state, chats) {\n\t\t\tstate.chats = {\n\t\t\t\t...state.chats,\n\t\t\t\t...chats,\n\t\t\t};\n\t\t},\n\n\t\t/*\n\t\t * Files\n\t\t */\n\t\taddFiles(state, files = {}) {\n\t\t\tstate.files = {\n\t\t\t\t...state.files,\n\t\t\t\t...files,\n\t\t\t};\n\t\t},\n\n\t\t/*\n\t\t * Locations\n\t\t */\n\t\taddLocations(state, locations) {\n\t\t\tstate.locations = {\n\t\t\t\t...state.locations,\n\t\t\t\t...locations,\n\t\t\t};\n\t\t},\n\n\t\tupdateLocation(state, location) {\n\t\t\tVue.set(state.locations, location.id, location);\n\t\t},\n\n\t\tdeleteLocation(state, location) {\n\t\t\tVue.delete(state.locations, location.id);\n\n\t\t\tfor (const eventId of Object.keys(state.events)) {\n\t\t\t\tconst event = state.events[eventId];\n\t\t\t\tlet locations = event.locations;\n\n\t\t\t\tconst index = locations.indexOf(location.id);\n\t\t\t\tif (index !== -1) locations.splice(index, 1);\n\n\t\t\t\tstate.events[eventId].locations = locations;\n\t\t\t}\n\t\t},\n\n\t\tsetLocationPerson(state, { location, person }) {\n\t\t\tVue.set(state.locations, location.id, {\n\t\t\t\t...state.locations[location.id],\n\t\t\t\tperson,\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * People\n\t\t */\n\t\tupdatePerson(state, person) {\n\t\t\tVue.set(\n\t\t\t\tstate.people,\n\t\t\t\tperson.id,\n\t\t\t\tperson.id in state.people\n\t\t\t\t\t? { ...state.people[person.id], ...person }\n\t\t\t\t\t: person\n\t\t\t);\n\t\t},\n\n\t\tdeletePerson(state, id) {\n\t\t\tVue.delete(state.people, id);\n\t\t},\n\n\t\t/*\n\t\t * EXIF\n\t\t */\n\t\taddExif(state, exif) {\n\t\t\tstate.exif = {\n\t\t\t\t...state.exif,\n\t\t\t\t...exif,\n\t\t\t};\n\t\t},\n\t},\n\tactions: {\n\t\tasync exportAsFile(context) {\n\t\t\tconst blob = await exportAsZip(context.state);\n\t\t\tconst data = window.URL.createObjectURL(blob);\n\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = data;\n\t\t\tlink.download = `${new Date().toISOString().split('.')[0]}.viz`;\n\n\t\t\t// this is necessary as link.click() does not work on the latest firefox\n\t\t\tlink.dispatchEvent(\n\t\t\t\tnew MouseEvent('click', {\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tview: window,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\t// For Firefox it is necessary to delay revoking the ObjectURL\n\t\t\t\twindow.URL.revokeObjectURL(data);\n\t\t\t\tlink.remove();\n\t\t\t}, 100);\n\t\t},\n\n\t\tasync loadFile(context, file) {\n\t\t\tcontext.commit('setViz', await loadVizFile(file));\n\t\t},\n\n\t\tasync parseExif(context, file) {\n\t\t\tcontext.commit('setViz', await loadVizFile(file));\n\t\t},\n\t},\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nimport map from './map';\nimport setup from './setup';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n\tstate: {},\n\tmutations: {},\n\tactions: {},\n\tmodules: {\n\t\tmap,\n\t\tsetup,\n\t},\n});\n","import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport './assets/tailwind.css';\n\nimport 'viewerjs/dist/viewer.css';\nimport VueViewer from 'v-viewer';\nimport VueMeta from 'vue-meta';\n\nimport { initFS } from './fs';\n\nasync function main() {\n\tawait initFS();\n\n\tVue.use(VueViewer);\n\tVue.use(VueMeta);\n\n\tVue.config.productionTip = false;\n\n\tnew Vue({\n\t\trouter,\n\t\tstore,\n\t\trender: (h) => h(App),\n\t}).$mount('#app');\n}\n\nmain().catch((e) => console.error('GLOBAL CATCH:', e));\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventControl.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{class:{\n\t\t'bg-blue-600 text-blue-100 font-bold flex items-center justify-between': true,\n\t\t'h-12 px-3': !_vm.small,\n\t\t'h-8 text-xs': _vm.small,\n\t}},[_c('h1',{staticClass:\"flex-1\"},[_c('input',{staticClass:\"font-bold text-blue-100 bg-transparent border-none focus:bg-blue-100 focus:text-blue-900 rounded pl-2\",class:{ 'text-sm': _vm.small, 'text-xl': !_vm.small },attrs:{\"type\":\"text\",\"name\":\"\",\"disabled\":_vm.locked},domProps:{\"value\":_vm.projectName},on:{\"input\":_vm.changedProjectName}})]),_c('nav',{staticClass:\"mx-auto flex justify-center items-center my-5 px-10\"},[_vm._t(\"nav\")],2),_c('div',{staticClass:\"flex-1 flex justify-end items-center gap-5\"},[_vm._t(\"actions\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<header\n\t\t:class=\"{\n\t\t\t'bg-blue-600 text-blue-100 font-bold flex items-center justify-between': true,\n\t\t\t'h-12 px-3': !small,\n\t\t\t'h-8 text-xs': small,\n\t\t}\"\n\t>\n\t\t<h1 class=\"flex-1\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"\"\n\t\t\t\t:value=\"projectName\"\n\t\t\t\t@input=\"changedProjectName\"\n\t\t\t\tclass=\"font-bold text-blue-100 bg-transparent border-none focus:bg-blue-100 focus:text-blue-900 rounded pl-2\"\n\t\t\t\t:class=\"{ 'text-sm': small, 'text-xl': !small }\"\n\t\t\t\t:disabled=\"locked\"\n\t\t\t/>\n\t\t</h1>\n\n\t\t<nav class=\"mx-auto flex justify-center items-center my-5 px-10\">\n\t\t\t<slot name=\"nav\" />\n\t\t</nav>\n\n\t\t<div class=\"flex-1 flex justify-end items-center gap-5\">\n\t\t\t<slot name=\"actions\" />\n\t\t</div>\n\t</header>\n</template>\n\n<script type=\"text/javascript\">\nexport default {\n\tprops: {\n\t\tsmall: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\tlocked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: () => false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tprojectName() {\n\t\t\treturn this.$store.state.setup.projectName;\n\t\t},\n\t},\n\tmethods: {\n\t\tchangedProjectName(e) {\n\t\t\tthis.$store.commit('setup/setProjectName', e.target.value);\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=1f009c92&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-undef */\n// import BrowserFS from 'browserfs';\n// import fs from 'fs';\n\nimport { FileFlag } from 'browserfs/dist/node/core/file_flag';\n\nexport let fs = new BrowserFS.FileSystem.MountableFileSystem();\n\nexport const Buffer = BrowserFS.BFSRequire('buffer').Buffer;\n\nexport async function initFS() {\n\t// BrowserFS.install(window);\n\tBrowserFS.initialize(fs);\n\n\tconsole.log(FileFlag);\n\n\t// const memory = new BrowserFS.FileSystem.InMemory();\n\n\t// fs.mount('/import', memory);\n\n\tfs.mount('/assets', new BrowserFS.FileSystem.InMemory());\n\tawait mkdir('/assets/Media');\n\tawait writeFile('/assets/Media/test.txt', 'Hello World!');\n\n\twindow.fs = fs;\n\twindow.BrowserFS = BrowserFS;\n}\n\nexport async function mountZipFile(zipFile, basePath = '/import') {\n\treturn new Promise((resolve, reject) => {\n\t\tif (fs.existsSync(basePath)) {\n\t\t\tfs.umount(basePath);\n\t\t}\n\n\t\tconst reader = new FileReader();\n\t\treader.onload = function (e) {\n\t\t\tconst arrayBuffer = e.target.result;\n\n\t\t\tfs.mount(\n\t\t\t\tbasePath,\n\t\t\t\tnew BrowserFS.FileSystem.ZipFS(Buffer.from(arrayBuffer))\n\t\t\t);\n\n\t\t\tresolve();\n\t\t};\n\t\treader.onerror = reject;\n\t\treader.readAsArrayBuffer(zipFile);\n\t});\n}\n\nexport async function readDir(dir) {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.readdir(dir, (e) => {\n\t\t\tif (e) {\n\t\t\t\treject(e);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport async function readFile(\n\tfile,\n\tencoding = 'utf8',\n\tflag = new FileFlag('r')\n) {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.readFile(file, encoding, flag, (e, contents) => {\n\t\t\tif (e) {\n\t\t\t\treject(e);\n\t\t\t} else {\n\t\t\t\tresolve(contents);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport async function writeFile(fname, content) {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.writeFile(fname, content, 'utf8', new FileFlag('w+'), 0, (e) => {\n\t\t\tif (e) {\n\t\t\t\treject(e);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport async function ensureDirectory(fname) {\n\tlet paths = fname.split('/');\n\tpaths = paths.slice(1, paths.length - 1);\n\n\tlet dir = '';\n\tfor (const path of paths) {\n\t\tdir += '/' + path;\n\n\t\tif (!fs.existsSync(dir)) fs.mkdirSync(dir);\n\t}\n}\n\nexport async function mkdir(fname) {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.mkdir(fname, 0, (e) => {\n\t\t\tif (e) {\n\t\t\t\treject(e);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-col gap-3 overflow-y-scroll pb-5\"},[_c('div',{staticClass:\"text-center text-xs font-medium text-gray-900 opacity-40\"},[_vm._v(\" \"+_vm._s(_vm.safeFirstDate.toLocaleString())+\" \")]),_vm._l((_vm.rebasedMessages),function(message){return _c('Bubble',{key:message.id,attrs:{\"message\":message,\"right\":message.isSender,\"sender\":message.isSender ? _vm.sender : _vm.receiver,\"color\":(_vm.color + \"-200\")}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"w-full flex \" + (_vm.right ? 'justify-end pl-12' : 'justify-start pr-12'))},[_c('div',{class:(\"max-w-sm flex gap-2  \" + (this.right ? 'flex-row-reverse' : ''))},[_c('img',{staticClass:\"h-6 w-6 rounded-full\",attrs:{\"src\":_vm.sender.avatarUrl ||\n\t\t\t\t(\"https://avatars.dicebear.com/api/bottts/\" + (encodeURIComponent(\n\t\t\t\t\t_vm.sender.name\n\t\t\t\t)) + \".svg\")}}),_c('div',{class:_vm.classes},[(_vm.message.mediaSrc)?_c('button',{staticClass:\"block mb-2 w-full\"},[_c('FSImg',{attrs:{\"src\":_vm.message.mediaSrc,\"mime\":_vm.message.mimeType},on:{\"click\":function($event){return _vm.onImageClick(_vm.message)}}})],1):_vm._e(),(_vm.message.text)?_c('p',{class:\"block text-gray-900 mb-2\"},[_vm._v(\" \"+_vm._s(_vm.message.text)+\" \")]):_vm._e(),_c('span',{class:(\"block text-xs text-gray-900 opacity-60 \" + (_vm.right ? 'text-right' : ''))},[_vm._v(\" \"+_vm._s(_vm.message.date.toLocaleString())+\" \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isImage)?_c('img',{staticClass:\"w-full\",attrs:{\"src\":_vm.url},on:{\"click\":function($event){return _vm.$emit('click', $event)}}}):_c('video',{staticClass:\"w-full\",attrs:{\"controls\":\"\",\"loop\":\"\"}},[_c('source',{attrs:{\"src\":_vm.url,\"type\":_vm.mime}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<img\n\t\t\t@click=\"$emit('click', $event)\"\n\t\t\t:src=\"url\"\n\t\t\tv-if=\"isImage\"\n\t\t\tclass=\"w-full\"\n\t\t/>\n\t\t<video v-else controls loop class=\"w-full\">\n\t\t\t<source :src=\"url\" :type=\"mime\" />\n\t\t</video>\n\t</div>\n</template>\n<script type=\"text/javascript\">\n// import { readFile } from '@/fs';\n\n// const toBase64 = (file) =>\n// \tnew Promise((resolve, reject) => {\n// \t\tconst reader = new FileReader();\n// \t\treader.readAsDataURL(file);\n// \t\treader.onload = () => resolve(reader.result);\n// \t\treader.onerror = (error) => reject(error);\n// \t});\n\nexport default {\n\tprops: {\n\t\tsrc: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\tdefault: 'image/jpeg',\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdataUri: '',\n\t\t};\n\t},\n\tcreated() {\n\t\t// requestAnimationFrame(async () => {\n\t\t// \tconst file = await readFile(this.src, null);\n\t\t// \tconst blob = new Blob([file.buffer], { type: this.mime || 'image/jpeg' });\n\t\t// \tconsole.log(blob, this.mime)\n\t\t// \tthis.url = (this.mime || 'image/jpeg').indexOf('video') === -1 ? await toBase64(blob) : URL.createObjectURL(blob);\n\t\t// });\n\t},\n\tcomputed: {\n\t\turl() {\n\t\t\treturn this.$store.state.setup.files[this.src];\n\t\t},\n\t\tisImage() {\n\t\t\treturn (this.mime || 'image/jpeg').indexOf('video') === -1;\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FSImg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FSImg.vue?vue&type=template&id=2476d417&\"\nimport script from \"./FSImg.vue?vue&type=script&lang=js&\"\nexport * from \"./FSImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div\n\t\t:class=\"`w-full flex ${\n\t\t\tright ? 'justify-end pl-12' : 'justify-start pr-12'\n\t\t}`\"\n\t>\n\t\t<div\n\t\t\t:class=\"`max-w-sm flex gap-2  ${\n\t\t\t\tthis.right ? 'flex-row-reverse' : ''\n\t\t\t}`\"\n\t\t>\n\t\t\t<img\n\t\t\t\tclass=\"h-6 w-6 rounded-full\"\n\t\t\t\t:src=\"\n\t\t\t\t\tsender.avatarUrl ||\n\t\t\t\t\t`https://avatars.dicebear.com/api/bottts/${encodeURIComponent(\n\t\t\t\t\t\tsender.name\n\t\t\t\t\t)}.svg`\n\t\t\t\t\"\n\t\t\t/>\n\t\t\t<div :class=\"classes\">\n\t\t\t\t<button v-if=\"message.mediaSrc\" class=\"block mb-2 w-full\">\n\t\t\t\t\t<FSImg\n\t\t\t\t\t\t:src=\"message.mediaSrc\"\n\t\t\t\t\t\t:mime=\"message.mimeType\"\n\t\t\t\t\t\t@click=\"onImageClick(message)\"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t\t<p v-if=\"message.text\" :class=\"`block text-gray-900 mb-2`\">\n\t\t\t\t\t{{ message.text }}\n\t\t\t\t</p>\n\t\t\t\t<span\n\t\t\t\t\t:class=\"`block text-xs text-gray-900 opacity-60 ${\n\t\t\t\t\t\tright ? 'text-right' : ''\n\t\t\t\t\t}`\"\n\t\t\t\t>\n\t\t\t\t\t{{ message.date.toLocaleString() }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script type=\"text/javascript\">\nimport FSImg from '@/components/chat/FSImg';\nimport inspectImage from '@/util/inspect-image';\n// const content = {\n// \ttype: 'text' || 'image',\n// \ttext: '',\n// \turl: '',\n// };\nexport default {\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tsender: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tid: '1ed7504b-35bd-41b7-b8d7-38149b8a027c',\n\t\t\t\tname: 'Unbekannt',\n\t\t\t\tavatarUrl:\n\t\t\t\t\t'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/00/00bb8a893a2e125c3fce471364154f950a8db60d.jpg',\n\t\t\t\tcolor: 'purple',\n\t\t\t}),\n\t\t},\n\t\tright: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'gray-300',\n\t\t},\n\t},\n\tcomputed: {\n\t\tclasses() {\n\t\t\treturn {\n\t\t\t\t'block px-3 py-2 rounded-lg text-left shadow': true,\n\t\t\t\t[`rounded-tr-none bg-${this.color}`]: !!this.right,\n\t\t\t\t'rounded-tl-none bg-gray-300': !this.right,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonImageClick(message) {\n\t\t\tinspectImage(\n\t\t\t\tthis.$viewerApi,\n\t\t\t\tthis.$store.state.setup,\n\t\t\t\tmessage.mediaSrc\n\t\t\t);\n\t\t},\n\t},\n\tcomponents: {\n\t\tFSImg,\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bubble.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bubble.vue?vue&type=template&id=1d7bd252&\"\nimport script from \"./Bubble.vue?vue&type=script&lang=js&\"\nexport * from \"./Bubble.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"flex flex-col gap-3 overflow-y-scroll pb-5\">\n\t\t<div class=\"text-center text-xs font-medium text-gray-900 opacity-40\">\n\t\t\t{{ safeFirstDate.toLocaleString() }}\n\t\t</div>\n\t\t<Bubble\n\t\t\tv-for=\"message in rebasedMessages\"\n\t\t\t:key=\"message.id\"\n\t\t\t:message=\"message\"\n\t\t\t:right=\"message.isSender\"\n\t\t\t:sender=\"message.isSender ? sender : receiver\"\n\t\t\t:color=\"`${color}-200`\"\n\t\t/>\n\t</div>\n</template>\n<script type=\"text/javascript\">\nimport Bubble from './Bubble';\n\nexport default {\n\tprops: {\n\t\tmessages: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsender: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\treceiver: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'green',\n\t\t},\n\t\tfirstDate: {\n\t\t\ttype: Date,\n\t\t},\n\t\tbasePath: {\n\t\t\ttype: String,\n\t\t\tdefault: '/import/Export/files/media/0/WhatsApp/Media/',\n\t\t},\n\t},\n\tcomputed: {\n\t\tsafeFirstDate() {\n\t\t\treturn this.messages[0]\n\t\t\t\t? this.messages[0].date\n\t\t\t\t: this.firstDate || new Date();\n\t\t},\n\t\trebasedMessages() {\n\t\t\treturn this.messages.map((message) => {\n\t\t\t\tif (!message.mediaSrc) return message;\n\n\t\t\t\treturn {\n\t\t\t\t\t...message,\n\t\t\t\t\t// mediaSrc: message.mediaSrc.replace('Media/', this.basePath)\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tBubble,\n\t},\n\n\tmethods: {},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=0e779be1&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ExifReader from 'exifreader';\nimport md5 from '@/md5';\n\nexport function getExifData(file) {\n\tlet exifData = ExifReader.load(file);\n\n\tdelete exifData['MakerNote']; // perf\n\n\tlet position = null;\n\n\tif ('GPSLatitude' in exifData && 'GPSLongitude' in exifData) {\n\t\tposition = {\n\t\t\tlat: parseFloat(exifData['GPSLatitude'].description),\n\t\t\tlng: parseFloat(exifData['GPSLongitude'].description),\n\t\t};\n\t}\n\n\tif (!position && 'Latitude' in exifData && 'Longitude' in exifData) {\n\t\tposition = {\n\t\t\tlat: parseFloat(exifData['Latitude'].value),\n\t\t\tlng: parseFloat(exifData['Longitude'].value),\n\t\t};\n\t}\n\n\tlet tags = {};\n\n\tfor (const tagName of Object.keys(exifData)) {\n\t\tconst tag = exifData[tagName];\n\n\t\tif (!tag.description || tag.description === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\ttags[tagName] = tag.description;\n\t}\n\n\ttags.position = position;\n\n\ttags.MD5 = md5(file);\n\tconsole.log(tags.MD5);\n\n\treturn { tags, position };\n}\n","/* eslint-disable no-async-promise-executor */\n\nimport uuid from 'uuid/v4';\nimport { mountZipFile, readFile, writeFile, ensureDirectory } from '@/fs';\nimport { getExifData } from '@/exif';\n// import initSqlJs from 'sql.js';\n\n// const initSqlJs = require('sql.js');\n\nlet sql = null;\n\nexport async function getSQL() {\n\tif (!sql) {\n\t\tsql = await window.initSqlJs({\n\t\t\t// Required to load the wasm binary asynchronously. Of course, you can host it wherever you want\n\t\t\t// You can omit locateFile completely when running in node\n\t\t\tlocateFile: (file) =>\n\t\t\t\t`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.1/${file}`,\n\t\t});\n\t}\n\n\treturn sql;\n}\n\nexport async function addPeopleMeta(buffer, state) {\n\tconst SQL = await getSQL();\n\tconst db = new SQL.Database(buffer);\n\n\tdb.each(\n\t\t`SELECT DISTINCT Contact, ContactAlias FROM data`,\n\t\t{},\n\t\tfunction (row) {\n\t\t\tlet chattedPerson = {\n\t\t\t\tid: row.Contact,\n\t\t\t\tname: row.ContactAlias,\n\t\t\t};\n\n\t\t\tstate.people[chattedPerson.id] = {\n\t\t\t\tid: row.Contact,\n\t\t\t\t...(state.people[chattedPerson.id] || {}),\n\t\t\t\tname: row.ContactAlias || row.Contact,\n\t\t\t};\n\t\t}\n\t);\n\n\treturn state;\n}\n\nexport async function parseMsgStore(buffer) {\n\tconst SQL = await getSQL();\n\tconst db = new SQL.Database(buffer);\n\n\tlet people = {};\n\tlet messages = [];\n\tlet chats = {};\n\tlet files = {};\n\tlet exif = {};\n\tlet locations = {};\n\tlet filePromises = [];\n\n\tdb.each(\n\t\t`SELECT\n\t\t\tmessages.*,\n\t\t\tmessage_media.file_path\n\t\tFROM\n\t\t\tmessages\n\t\t\tLEFT JOIN message_media ON messages.media_url = message_media.message_url`,\n\t\t{},\n\t\tfunction (row) {\n\t\t\tlet chattedPerson = {\n\t\t\t\tid: row.key_remote_jid,\n\t\t\t\tname: row.key_remote_jid,\n\t\t\t\tavatarUrl: '',\n\t\t\t\tcolor: 'green',\n\t\t\t};\n\n\t\t\tif (!people[chattedPerson.id]) {\n\t\t\t\tpeople[chattedPerson.id] = chattedPerson;\n\t\t\t} else {\n\t\t\t\tchattedPerson = people[chattedPerson.id];\n\t\t\t}\n\n\t\t\tconst message = {\n\t\t\t\tid: uuid(),\n\t\t\t\tsender: chattedPerson.id,\n\t\t\t\tchatId: chattedPerson.id,\n\t\t\t\tdate: new Date(row.timestamp),\n\t\t\t\ttype: 'text',\n\t\t\t\tisSender: row.key_from_me === 1,\n\t\t\t\ttext: row.data || row.media_caption,\n\t\t\t\tmediaSrc: row.file_path,\n\t\t\t\tmimeType: row.media_mime_type,\n\t\t\t};\n\n\t\t\tif (message.mediaSrc) {\n\t\t\t\tfilePromises.push(\n\t\t\t\t\t(async () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst file = await readFile(\n\t\t\t\t\t\t\t\tmessage.mediaSrc.replace(\n\t\t\t\t\t\t\t\t\t'Media/',\n\t\t\t\t\t\t\t\t\t'/import/Export/files/media/0/WhatsApp/Media/'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst blob = new Blob([file.buffer], {\n\t\t\t\t\t\t\t\ttype: message.mimeType || 'image/jpeg',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfiles[message.mediaSrc] = URL.createObjectURL(blob);\n\n\t\t\t\t\t\t\t// Move to /assets/Media\n\t\t\t\t\t\t\tconst path = message.mediaSrc.replace(\n\t\t\t\t\t\t\t\t'Media/',\n\t\t\t\t\t\t\t\t'/assets/Media/'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tawait ensureDirectory(path);\n\t\t\t\t\t\t\tawait writeFile(path, file, null);\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(message.mimeType || 'image/jpeg') ===\n\t\t\t\t\t\t\t\t'image/jpeg'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst { tags, position } = getExifData(\n\t\t\t\t\t\t\t\t\tawait blob.arrayBuffer()\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (position) {\n\t\t\t\t\t\t\t\t\tconst pathParts =\n\t\t\t\t\t\t\t\t\t\tmessage.mediaSrc.split('/');\n\t\t\t\t\t\t\t\t\tconst filename =\n\t\t\t\t\t\t\t\t\t\tpathParts[pathParts.length - 1];\n\n\t\t\t\t\t\t\t\t\tconst location = {\n\t\t\t\t\t\t\t\t\t\tid: `location-${message.mediaSrc}`,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\t// date: new Date('2021-10-01 15:50:00'),\n\t\t\t\t\t\t\t\t\t\t// person: personA.id,\n\t\t\t\t\t\t\t\t\t\tdescription: filename,\n\t\t\t\t\t\t\t\t\t\tmediaSrc: message.mediaSrc,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlocations[location.id] = location;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\texif[message.mediaSrc] = tags;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t'could not fetch file',\n\t\t\t\t\t\t\t\tmessage.mediaSrc,\n\t\t\t\t\t\t\t\te\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (message.text || message.mediaSrc) {\n\t\t\t\tmessages.push(message);\n\t\t\t}\n\t\t}\n\t);\n\n\tfor (const message of messages) {\n\t\tconst id = `chat-${message.chatId}`;\n\t\tif (id in chats) {\n\t\t\tchats[id].messages.push(message);\n\t\t} else {\n\t\t\tchats[id] = {\n\t\t\t\tid: id,\n\t\t\t\ttype: 'whatsapp',\n\t\t\t\treceiver: message.chatId,\n\t\t\t\tsender: null,\n\t\t\t\tmessages: [message],\n\t\t\t};\n\t\t}\n\t}\n\n\tawait Promise.allSettled(filePromises);\n\n\treturn {\n\t\tchats,\n\t\tpeople,\n\t\tfiles,\n\t\tlocations,\n\t\texif,\n\t};\n}\n\nexport async function loadVizFile(file) {\n\tawait mountZipFile(file, '/load');\n\tlet vizJson = JSON.parse(await readFile('/load/Viz.json'));\n\n\tconsole.log(vizJson);\n\n\tvizJson.files = {};\n\tvizJson.exif = vizJson.exif || {};\n\n\tfor (const chat of Object.values(vizJson.chats)) {\n\t\tfor (const message of chat.messages) {\n\t\t\ttry {\n\t\t\t\tmessage.date = new Date(message.date);\n\t\t\t\tconsole.info(message.mediaSrc);\n\t\t\t\tif (message.mediaSrc) {\n\t\t\t\t\tconst file = await readFile(\n\t\t\t\t\t\t`/load/${message.mediaSrc}`,\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t\tconst blob = new Blob([file.buffer], {\n\t\t\t\t\t\ttype: message.mimeType || 'image/jpeg',\n\t\t\t\t\t});\n\t\t\t\t\tvizJson.files[message.mediaSrc] = URL.createObjectURL(blob);\n\n\t\t\t\t\t// Move to /assets/Media\n\t\t\t\t\tawait ensureDirectory(`/assets/${message.mediaSrc}`);\n\t\t\t\t\tawait writeFile(`/assets/${message.mediaSrc}`, file, null);\n\n\t\t\t\t\tif ((message.mimeType || 'image/jpeg') === 'image/jpeg') {\n\t\t\t\t\t\tconst { tags, position } = getExifData(\n\t\t\t\t\t\t\tawait blob.arrayBuffer()\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (position) {\n\t\t\t\t\t\t\tconst pathParts = message.mediaSrc.split('/');\n\t\t\t\t\t\t\tconst filename = pathParts[pathParts.length - 1];\n\n\t\t\t\t\t\t\tconst location = {\n\t\t\t\t\t\t\t\tid: `location-${message.mediaSrc}`,\n\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t// date: new Date('2021-10-01 15:50:00'),\n\t\t\t\t\t\t\t\t// person: personA.id,\n\t\t\t\t\t\t\t\tdescription: filename,\n\t\t\t\t\t\t\t\tmediaSrc: message.mediaSrc,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvizJson.locations[location.id] =\n\t\t\t\t\t\t\t\tlocation || vizJson.locations[location.id];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvizJson.exif[message.mediaSrc] =\n\t\t\t\t\t\t\ttags || vizJson.exif[message.mediaSrc];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('could not fetch file', message.mediaSrc, e);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const event of Object.values(vizJson.events)) {\n\t\tevent.start = new Date(event.start);\n\t\tevent.end = new Date(event.end);\n\t}\n\n\treturn vizJson;\n}\n","/*\nhttps://github.com/emn178/js-md5\nCopyright 2014-2017 Chen, Yi-Cyuan\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n */\n\nvar ERROR = 'input is invalid type';\nvar WINDOW = typeof window === 'object';\nvar root = WINDOW ? window : {};\nif (root.JS_MD5_NO_WINDOW) {\n\tWINDOW = false;\n}\nvar WEB_WORKER = !WINDOW && typeof self === 'object';\nvar NODE_JS =\n\t!root.JS_MD5_NO_NODE_JS &&\n\ttypeof process === 'object' &&\n\tprocess.versions &&\n\tprocess.versions.node;\nif (NODE_JS) {\n\troot = global;\n} else if (WEB_WORKER) {\n\troot = self;\n}\nvar ARRAY_BUFFER =\n\t!root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\nvar HEX_CHARS = '0123456789abcdef'.split('');\nvar EXTRA = [128, 32768, 8388608, -2147483648];\nvar SHIFT = [0, 8, 16, 24];\nvar OUTPUT_TYPES = [\n\t'hex',\n\t'array',\n\t'digest',\n\t'buffer',\n\t'arrayBuffer',\n\t'base64',\n];\nvar BASE64_ENCODE_CHAR =\n\t'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split(\n\t\t''\n\t);\n\nvar blocks = [],\n\tbuffer8;\nif (ARRAY_BUFFER) {\n\tvar buffer = new ArrayBuffer(68);\n\tbuffer8 = new Uint8Array(buffer);\n\tblocks = new Uint32Array(buffer);\n}\n\nif (root.JS_MD5_NO_NODE_JS || !Array.isArray) {\n\tArray.isArray = function (obj) {\n\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t};\n}\n\nif (\n\tARRAY_BUFFER &&\n\t(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)\n) {\n\tArrayBuffer.isView = function (obj) {\n\t\treturn (\n\t\t\ttypeof obj === 'object' &&\n\t\t\tobj.buffer &&\n\t\t\tobj.buffer.constructor === ArrayBuffer\n\t\t);\n\t};\n}\n\n/**\n * @method hex\n * @memberof md5\n * @description Output hash as hex string\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {String} Hex string\n * @example\n * md5.hex('The quick brown fox jumps over the lazy dog');\n * // equal to\n * md5('The quick brown fox jumps over the lazy dog');\n */\n/**\n * @method digest\n * @memberof md5\n * @description Output hash as bytes array\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {Array} Bytes array\n * @example\n * md5.digest('The quick brown fox jumps over the lazy dog');\n */\n/**\n * @method array\n * @memberof md5\n * @description Output hash as bytes array\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {Array} Bytes array\n * @example\n * md5.array('The quick brown fox jumps over the lazy dog');\n */\n/**\n * @method arrayBuffer\n * @memberof md5\n * @description Output hash as ArrayBuffer\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {ArrayBuffer} ArrayBuffer\n * @example\n * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');\n */\n/**\n * @method buffer\n * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n * @memberof md5\n * @description Output hash as ArrayBuffer\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {ArrayBuffer} ArrayBuffer\n * @example\n * md5.buffer('The quick brown fox jumps over the lazy dog');\n */\n/**\n * @method base64\n * @memberof md5\n * @description Output hash as base64 string\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {String} base64 string\n * @example\n * md5.base64('The quick brown fox jumps over the lazy dog');\n */\nvar createOutputMethod = function (outputType) {\n\treturn function (message) {\n\t\treturn new Md5(true).update(message)[outputType]();\n\t};\n};\n\n/**\n * @method create\n * @memberof md5\n * @description Create Md5 object\n * @returns {Md5} Md5 object.\n * @example\n * var hash = md5.create();\n */\n/**\n * @method update\n * @memberof md5\n * @description Create and update Md5 object\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {Md5} Md5 object.\n * @example\n * var hash = md5.update('The quick brown fox jumps over the lazy dog');\n * // equal to\n * var hash = md5.create();\n * hash.update('The quick brown fox jumps over the lazy dog');\n */\nvar createMethod = function () {\n\tvar method = createOutputMethod('hex');\n\n\tmethod.create = function () {\n\t\treturn new Md5();\n\t};\n\tmethod.update = function (message) {\n\t\treturn method.create().update(message);\n\t};\n\tfor (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n\t\tvar type = OUTPUT_TYPES[i];\n\t\tmethod[type] = createOutputMethod(type);\n\t}\n\treturn method;\n};\n\n/**\n * Md5 class\n * @class Md5\n * @description This is internal class.\n * @see {@link md5.create}\n */\nfunction Md5(sharedMemory) {\n\tif (sharedMemory) {\n\t\tblocks[0] =\n\t\t\tblocks[16] =\n\t\t\tblocks[1] =\n\t\t\tblocks[2] =\n\t\t\tblocks[3] =\n\t\t\tblocks[4] =\n\t\t\tblocks[5] =\n\t\t\tblocks[6] =\n\t\t\tblocks[7] =\n\t\t\tblocks[8] =\n\t\t\tblocks[9] =\n\t\t\tblocks[10] =\n\t\t\tblocks[11] =\n\t\t\tblocks[12] =\n\t\t\tblocks[13] =\n\t\t\tblocks[14] =\n\t\t\tblocks[15] =\n\t\t\t\t0;\n\t\tthis.blocks = blocks;\n\t\tthis.buffer8 = buffer8;\n\t} else {\n\t\tif (ARRAY_BUFFER) {\n\t\t\tvar buffer = new ArrayBuffer(68);\n\t\t\tthis.buffer8 = new Uint8Array(buffer);\n\t\t\tthis.blocks = new Uint32Array(buffer);\n\t\t} else {\n\t\t\tthis.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\t\t}\n\t}\n\tthis.h0 =\n\t\tthis.h1 =\n\t\tthis.h2 =\n\t\tthis.h3 =\n\t\tthis.start =\n\t\tthis.bytes =\n\t\tthis.hBytes =\n\t\t\t0;\n\tthis.finalized = this.hashed = false;\n\tthis.first = true;\n}\n\n/**\n * @method update\n * @memberof Md5\n * @instance\n * @description Update hash\n * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n * @returns {Md5} Md5 object.\n * @see {@link md5.update}\n */\nMd5.prototype.update = function (message) {\n\tif (this.finalized) {\n\t\treturn;\n\t}\n\n\tvar notString,\n\t\ttype = typeof message;\n\tif (type !== 'string') {\n\t\tif (type === 'object') {\n\t\t\tif (message === null) {\n\t\t\t\tthrow ERROR;\n\t\t\t} else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n\t\t\t\tmessage = new Uint8Array(message);\n\t\t\t} else if (!Array.isArray(message)) {\n\t\t\t\tif (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n\t\t\t\t\tthrow ERROR;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow ERROR;\n\t\t}\n\t\tnotString = true;\n\t}\n\tvar code,\n\t\tindex = 0,\n\t\ti,\n\t\tlength = message.length,\n\t\tblocks = this.blocks;\n\tvar buffer8 = this.buffer8;\n\n\twhile (index < length) {\n\t\tif (this.hashed) {\n\t\t\tthis.hashed = false;\n\t\t\tblocks[0] = blocks[16];\n\t\t\tblocks[16] =\n\t\t\t\tblocks[1] =\n\t\t\t\tblocks[2] =\n\t\t\t\tblocks[3] =\n\t\t\t\tblocks[4] =\n\t\t\t\tblocks[5] =\n\t\t\t\tblocks[6] =\n\t\t\t\tblocks[7] =\n\t\t\t\tblocks[8] =\n\t\t\t\tblocks[9] =\n\t\t\t\tblocks[10] =\n\t\t\t\tblocks[11] =\n\t\t\t\tblocks[12] =\n\t\t\t\tblocks[13] =\n\t\t\t\tblocks[14] =\n\t\t\t\tblocks[15] =\n\t\t\t\t\t0;\n\t\t}\n\n\t\tif (notString) {\n\t\t\tif (ARRAY_BUFFER) {\n\t\t\t\tfor (i = this.start; index < length && i < 64; ++index) {\n\t\t\t\t\tbuffer8[i++] = message[index];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = this.start; index < length && i < 64; ++index) {\n\t\t\t\t\tblocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (ARRAY_BUFFER) {\n\t\t\t\tfor (i = this.start; index < length && i < 64; ++index) {\n\t\t\t\t\tcode = message.charCodeAt(index);\n\t\t\t\t\tif (code < 0x80) {\n\t\t\t\t\t\tbuffer8[i++] = code;\n\t\t\t\t\t} else if (code < 0x800) {\n\t\t\t\t\t\tbuffer8[i++] = 0xc0 | (code >> 6);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | (code & 0x3f);\n\t\t\t\t\t} else if (code < 0xd800 || code >= 0xe000) {\n\t\t\t\t\t\tbuffer8[i++] = 0xe0 | (code >> 12);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | (code & 0x3f);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode =\n\t\t\t\t\t\t\t0x10000 +\n\t\t\t\t\t\t\t(((code & 0x3ff) << 10) |\n\t\t\t\t\t\t\t\t(message.charCodeAt(++index) & 0x3ff));\n\t\t\t\t\t\tbuffer8[i++] = 0xf0 | (code >> 18);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | ((code >> 12) & 0x3f);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n\t\t\t\t\t\tbuffer8[i++] = 0x80 | (code & 0x3f);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = this.start; index < length && i < 64; ++index) {\n\t\t\t\t\tcode = message.charCodeAt(index);\n\t\t\t\t\tif (code < 0x80) {\n\t\t\t\t\t\tblocks[i >> 2] |= code << SHIFT[i++ & 3];\n\t\t\t\t\t} else if (code < 0x800) {\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t} else if (code < 0xd800 || code >= 0xe000) {\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcode =\n\t\t\t\t\t\t\t0x10000 +\n\t\t\t\t\t\t\t(((code & 0x3ff) << 10) |\n\t\t\t\t\t\t\t\t(message.charCodeAt(++index) & 0x3ff));\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t\tblocks[i >> 2] |=\n\t\t\t\t\t\t\t(0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.lastByteIndex = i;\n\t\tthis.bytes += i - this.start;\n\t\tif (i >= 64) {\n\t\t\tthis.start = i - 64;\n\t\t\tthis.hash();\n\t\t\tthis.hashed = true;\n\t\t} else {\n\t\t\tthis.start = i;\n\t\t}\n\t}\n\tif (this.bytes > 4294967295) {\n\t\tthis.hBytes += (this.bytes / 4294967296) << 0;\n\t\tthis.bytes = this.bytes % 4294967296;\n\t}\n\treturn this;\n};\n\nMd5.prototype.finalize = function () {\n\tif (this.finalized) {\n\t\treturn;\n\t}\n\tthis.finalized = true;\n\tvar blocks = this.blocks,\n\t\ti = this.lastByteIndex;\n\tblocks[i >> 2] |= EXTRA[i & 3];\n\tif (i >= 56) {\n\t\tif (!this.hashed) {\n\t\t\tthis.hash();\n\t\t}\n\t\tblocks[0] = blocks[16];\n\t\tblocks[16] =\n\t\t\tblocks[1] =\n\t\t\tblocks[2] =\n\t\t\tblocks[3] =\n\t\t\tblocks[4] =\n\t\t\tblocks[5] =\n\t\t\tblocks[6] =\n\t\t\tblocks[7] =\n\t\t\tblocks[8] =\n\t\t\tblocks[9] =\n\t\t\tblocks[10] =\n\t\t\tblocks[11] =\n\t\t\tblocks[12] =\n\t\t\tblocks[13] =\n\t\t\tblocks[14] =\n\t\t\tblocks[15] =\n\t\t\t\t0;\n\t}\n\tblocks[14] = this.bytes << 3;\n\tblocks[15] = (this.hBytes << 3) | (this.bytes >>> 29);\n\tthis.hash();\n};\n\nMd5.prototype.hash = function () {\n\tvar a,\n\t\tb,\n\t\tc,\n\t\td,\n\t\tbc,\n\t\tda,\n\t\tblocks = this.blocks;\n\n\tif (this.first) {\n\t\ta = blocks[0] - 680876937;\n\t\ta = (((a << 7) | (a >>> 25)) - 271733879) << 0;\n\t\td = (-1732584194 ^ (a & 2004318071)) + blocks[1] - 117830708;\n\t\td = (((d << 12) | (d >>> 20)) + a) << 0;\n\t\tc = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;\n\t\tc = (((c << 17) | (c >>> 15)) + d) << 0;\n\t\tb = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;\n\t\tb = (((b << 22) | (b >>> 10)) + c) << 0;\n\t} else {\n\t\ta = this.h0;\n\t\tb = this.h1;\n\t\tc = this.h2;\n\t\td = this.h3;\n\t\ta += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;\n\t\ta = (((a << 7) | (a >>> 25)) + b) << 0;\n\t\td += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;\n\t\td = (((d << 12) | (d >>> 20)) + a) << 0;\n\t\tc += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;\n\t\tc = (((c << 17) | (c >>> 15)) + d) << 0;\n\t\tb += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;\n\t\tb = (((b << 22) | (b >>> 10)) + c) << 0;\n\t}\n\n\ta += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;\n\ta = (((a << 7) | (a >>> 25)) + b) << 0;\n\td += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;\n\td = (((d << 12) | (d >>> 20)) + a) << 0;\n\tc += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;\n\tc = (((c << 17) | (c >>> 15)) + d) << 0;\n\tb += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;\n\tb = (((b << 22) | (b >>> 10)) + c) << 0;\n\ta += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;\n\ta = (((a << 7) | (a >>> 25)) + b) << 0;\n\td += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;\n\td = (((d << 12) | (d >>> 20)) + a) << 0;\n\tc += (b ^ (d & (a ^ b))) + blocks[10] - 42063;\n\tc = (((c << 17) | (c >>> 15)) + d) << 0;\n\tb += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;\n\tb = (((b << 22) | (b >>> 10)) + c) << 0;\n\ta += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;\n\ta = (((a << 7) | (a >>> 25)) + b) << 0;\n\td += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;\n\td = (((d << 12) | (d >>> 20)) + a) << 0;\n\tc += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;\n\tc = (((c << 17) | (c >>> 15)) + d) << 0;\n\tb += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;\n\tb = (((b << 22) | (b >>> 10)) + c) << 0;\n\ta += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;\n\ta = (((a << 5) | (a >>> 27)) + b) << 0;\n\td += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;\n\td = (((d << 9) | (d >>> 23)) + a) << 0;\n\tc += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;\n\tc = (((c << 14) | (c >>> 18)) + d) << 0;\n\tb += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;\n\tb = (((b << 20) | (b >>> 12)) + c) << 0;\n\ta += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;\n\ta = (((a << 5) | (a >>> 27)) + b) << 0;\n\td += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;\n\td = (((d << 9) | (d >>> 23)) + a) << 0;\n\tc += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;\n\tc = (((c << 14) | (c >>> 18)) + d) << 0;\n\tb += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;\n\tb = (((b << 20) | (b >>> 12)) + c) << 0;\n\ta += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;\n\ta = (((a << 5) | (a >>> 27)) + b) << 0;\n\td += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;\n\td = (((d << 9) | (d >>> 23)) + a) << 0;\n\tc += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;\n\tc = (((c << 14) | (c >>> 18)) + d) << 0;\n\tb += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;\n\tb = (((b << 20) | (b >>> 12)) + c) << 0;\n\ta += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;\n\ta = (((a << 5) | (a >>> 27)) + b) << 0;\n\td += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;\n\td = (((d << 9) | (d >>> 23)) + a) << 0;\n\tc += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;\n\tc = (((c << 14) | (c >>> 18)) + d) << 0;\n\tb += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;\n\tb = (((b << 20) | (b >>> 12)) + c) << 0;\n\tbc = b ^ c;\n\ta += (bc ^ d) + blocks[5] - 378558;\n\ta = (((a << 4) | (a >>> 28)) + b) << 0;\n\td += (bc ^ a) + blocks[8] - 2022574463;\n\td = (((d << 11) | (d >>> 21)) + a) << 0;\n\tda = d ^ a;\n\tc += (da ^ b) + blocks[11] + 1839030562;\n\tc = (((c << 16) | (c >>> 16)) + d) << 0;\n\tb += (da ^ c) + blocks[14] - 35309556;\n\tb = (((b << 23) | (b >>> 9)) + c) << 0;\n\tbc = b ^ c;\n\ta += (bc ^ d) + blocks[1] - 1530992060;\n\ta = (((a << 4) | (a >>> 28)) + b) << 0;\n\td += (bc ^ a) + blocks[4] + 1272893353;\n\td = (((d << 11) | (d >>> 21)) + a) << 0;\n\tda = d ^ a;\n\tc += (da ^ b) + blocks[7] - 155497632;\n\tc = (((c << 16) | (c >>> 16)) + d) << 0;\n\tb += (da ^ c) + blocks[10] - 1094730640;\n\tb = (((b << 23) | (b >>> 9)) + c) << 0;\n\tbc = b ^ c;\n\ta += (bc ^ d) + blocks[13] + 681279174;\n\ta = (((a << 4) | (a >>> 28)) + b) << 0;\n\td += (bc ^ a) + blocks[0] - 358537222;\n\td = (((d << 11) | (d >>> 21)) + a) << 0;\n\tda = d ^ a;\n\tc += (da ^ b) + blocks[3] - 722521979;\n\tc = (((c << 16) | (c >>> 16)) + d) << 0;\n\tb += (da ^ c) + blocks[6] + 76029189;\n\tb = (((b << 23) | (b >>> 9)) + c) << 0;\n\tbc = b ^ c;\n\ta += (bc ^ d) + blocks[9] - 640364487;\n\ta = (((a << 4) | (a >>> 28)) + b) << 0;\n\td += (bc ^ a) + blocks[12] - 421815835;\n\td = (((d << 11) | (d >>> 21)) + a) << 0;\n\tda = d ^ a;\n\tc += (da ^ b) + blocks[15] + 530742520;\n\tc = (((c << 16) | (c >>> 16)) + d) << 0;\n\tb += (da ^ c) + blocks[2] - 995338651;\n\tb = (((b << 23) | (b >>> 9)) + c) << 0;\n\ta += (c ^ (b | ~d)) + blocks[0] - 198630844;\n\ta = (((a << 6) | (a >>> 26)) + b) << 0;\n\td += (b ^ (a | ~c)) + blocks[7] + 1126891415;\n\td = (((d << 10) | (d >>> 22)) + a) << 0;\n\tc += (a ^ (d | ~b)) + blocks[14] - 1416354905;\n\tc = (((c << 15) | (c >>> 17)) + d) << 0;\n\tb += (d ^ (c | ~a)) + blocks[5] - 57434055;\n\tb = (((b << 21) | (b >>> 11)) + c) << 0;\n\ta += (c ^ (b | ~d)) + blocks[12] + 1700485571;\n\ta = (((a << 6) | (a >>> 26)) + b) << 0;\n\td += (b ^ (a | ~c)) + blocks[3] - 1894986606;\n\td = (((d << 10) | (d >>> 22)) + a) << 0;\n\tc += (a ^ (d | ~b)) + blocks[10] - 1051523;\n\tc = (((c << 15) | (c >>> 17)) + d) << 0;\n\tb += (d ^ (c | ~a)) + blocks[1] - 2054922799;\n\tb = (((b << 21) | (b >>> 11)) + c) << 0;\n\ta += (c ^ (b | ~d)) + blocks[8] + 1873313359;\n\ta = (((a << 6) | (a >>> 26)) + b) << 0;\n\td += (b ^ (a | ~c)) + blocks[15] - 30611744;\n\td = (((d << 10) | (d >>> 22)) + a) << 0;\n\tc += (a ^ (d | ~b)) + blocks[6] - 1560198380;\n\tc = (((c << 15) | (c >>> 17)) + d) << 0;\n\tb += (d ^ (c | ~a)) + blocks[13] + 1309151649;\n\tb = (((b << 21) | (b >>> 11)) + c) << 0;\n\ta += (c ^ (b | ~d)) + blocks[4] - 145523070;\n\ta = (((a << 6) | (a >>> 26)) + b) << 0;\n\td += (b ^ (a | ~c)) + blocks[11] - 1120210379;\n\td = (((d << 10) | (d >>> 22)) + a) << 0;\n\tc += (a ^ (d | ~b)) + blocks[2] + 718787259;\n\tc = (((c << 15) | (c >>> 17)) + d) << 0;\n\tb += (d ^ (c | ~a)) + blocks[9] - 343485551;\n\tb = (((b << 21) | (b >>> 11)) + c) << 0;\n\n\tif (this.first) {\n\t\tthis.h0 = (a + 1732584193) << 0;\n\t\tthis.h1 = (b - 271733879) << 0;\n\t\tthis.h2 = (c - 1732584194) << 0;\n\t\tthis.h3 = (d + 271733878) << 0;\n\t\tthis.first = false;\n\t} else {\n\t\tthis.h0 = (this.h0 + a) << 0;\n\t\tthis.h1 = (this.h1 + b) << 0;\n\t\tthis.h2 = (this.h2 + c) << 0;\n\t\tthis.h3 = (this.h3 + d) << 0;\n\t}\n};\n\n/**\n * @method hex\n * @memberof Md5\n * @instance\n * @description Output hash as hex string\n * @returns {String} Hex string\n * @see {@link md5.hex}\n * @example\n * hash.hex();\n */\nMd5.prototype.hex = function () {\n\tthis.finalize();\n\n\tvar h0 = this.h0,\n\t\th1 = this.h1,\n\t\th2 = this.h2,\n\t\th3 = this.h3;\n\n\treturn (\n\t\tHEX_CHARS[(h0 >> 4) & 0x0f] +\n\t\tHEX_CHARS[h0 & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 12) & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 8) & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 20) & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 16) & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 28) & 0x0f] +\n\t\tHEX_CHARS[(h0 >> 24) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 4) & 0x0f] +\n\t\tHEX_CHARS[h1 & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 12) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 8) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 20) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 16) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 28) & 0x0f] +\n\t\tHEX_CHARS[(h1 >> 24) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 4) & 0x0f] +\n\t\tHEX_CHARS[h2 & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 12) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 8) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 20) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 16) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 28) & 0x0f] +\n\t\tHEX_CHARS[(h2 >> 24) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 4) & 0x0f] +\n\t\tHEX_CHARS[h3 & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 12) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 8) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 20) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 16) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 28) & 0x0f] +\n\t\tHEX_CHARS[(h3 >> 24) & 0x0f]\n\t);\n};\n\n/**\n * @method toString\n * @memberof Md5\n * @instance\n * @description Output hash as hex string\n * @returns {String} Hex string\n * @see {@link md5.hex}\n * @example\n * hash.toString();\n */\nMd5.prototype.toString = Md5.prototype.hex;\n\n/**\n * @method digest\n * @memberof Md5\n * @instance\n * @description Output hash as bytes array\n * @returns {Array} Bytes array\n * @see {@link md5.digest}\n * @example\n * hash.digest();\n */\nMd5.prototype.digest = function () {\n\tthis.finalize();\n\n\tvar h0 = this.h0,\n\t\th1 = this.h1,\n\t\th2 = this.h2,\n\t\th3 = this.h3;\n\treturn [\n\t\th0 & 0xff,\n\t\t(h0 >> 8) & 0xff,\n\t\t(h0 >> 16) & 0xff,\n\t\t(h0 >> 24) & 0xff,\n\t\th1 & 0xff,\n\t\t(h1 >> 8) & 0xff,\n\t\t(h1 >> 16) & 0xff,\n\t\t(h1 >> 24) & 0xff,\n\t\th2 & 0xff,\n\t\t(h2 >> 8) & 0xff,\n\t\t(h2 >> 16) & 0xff,\n\t\t(h2 >> 24) & 0xff,\n\t\th3 & 0xff,\n\t\t(h3 >> 8) & 0xff,\n\t\t(h3 >> 16) & 0xff,\n\t\t(h3 >> 24) & 0xff,\n\t];\n};\n\n/**\n * @method array\n * @memberof Md5\n * @instance\n * @description Output hash as bytes array\n * @returns {Array} Bytes array\n * @see {@link md5.array}\n * @example\n * hash.array();\n */\nMd5.prototype.array = Md5.prototype.digest;\n\n/**\n * @method arrayBuffer\n * @memberof Md5\n * @instance\n * @description Output hash as ArrayBuffer\n * @returns {ArrayBuffer} ArrayBuffer\n * @see {@link md5.arrayBuffer}\n * @example\n * hash.arrayBuffer();\n */\nMd5.prototype.arrayBuffer = function () {\n\tthis.finalize();\n\n\tvar buffer = new ArrayBuffer(16);\n\tvar blocks = new Uint32Array(buffer);\n\tblocks[0] = this.h0;\n\tblocks[1] = this.h1;\n\tblocks[2] = this.h2;\n\tblocks[3] = this.h3;\n\treturn buffer;\n};\n\n/**\n * @method buffer\n * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n * @memberof Md5\n * @instance\n * @description Output hash as ArrayBuffer\n * @returns {ArrayBuffer} ArrayBuffer\n * @see {@link md5.buffer}\n * @example\n * hash.buffer();\n */\nMd5.prototype.buffer = Md5.prototype.arrayBuffer;\n\n/**\n * @method base64\n * @memberof Md5\n * @instance\n * @description Output hash as base64 string\n * @returns {String} base64 string\n * @see {@link md5.base64}\n * @example\n * hash.base64();\n */\nMd5.prototype.base64 = function () {\n\tvar v1,\n\t\tv2,\n\t\tv3,\n\t\tbase64Str = '',\n\t\tbytes = this.array();\n\tfor (var i = 0; i < 15; ) {\n\t\tv1 = bytes[i++];\n\t\tv2 = bytes[i++];\n\t\tv3 = bytes[i++];\n\t\tbase64Str +=\n\t\t\tBASE64_ENCODE_CHAR[v1 >>> 2] +\n\t\t\tBASE64_ENCODE_CHAR[((v1 << 4) | (v2 >>> 4)) & 63] +\n\t\t\tBASE64_ENCODE_CHAR[((v2 << 2) | (v3 >>> 6)) & 63] +\n\t\t\tBASE64_ENCODE_CHAR[v3 & 63];\n\t}\n\tv1 = bytes[i];\n\tbase64Str +=\n\t\tBASE64_ENCODE_CHAR[v1 >>> 2] +\n\t\tBASE64_ENCODE_CHAR[(v1 << 4) & 63] +\n\t\t'==';\n\treturn base64Str;\n};\n\nexport default createMethod();\n"],"sourceRoot":""}