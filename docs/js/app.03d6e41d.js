(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},s={app:0},i=[];function o(e){return c.p+"js/"+({map:"map"}[e]||e)+"."+{map:"c5f574a4"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={map:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({map:"map"}[e]||e)+"."+{map:"6944e6d0"}[e]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===a||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}s[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04f8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},1185:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("b0c0");var a=n("6a83"),r=n.n(a),s=n("04f8"),i=n.n(s),o=n("e11e");function c(e,t){var n;return e.person&&(n=t[e.person]),n?Object(o["icon"])({iconUrl:n.avatarUrl||"https://avatars.dicebear.com/api/bottts/".concat(encodeURIComponent(n.name),".svg"),iconSize:[32,32],iconAnchor:[16,16],tooltipAnchor:[16,0],popupAnchor:[1,-34],className:"rounded-full shadow-lg border-2 border-gray-500"}):Object(o["icon"])({iconUrl:r.a,shadowUrl:i.a,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]})}},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col",attrs:{id:"app"}},[n("router-view")],1)},i=[],o=n("2877"),c={},l=Object(o["a"])(c,s,i,!1,null,null,null),u=l.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("Header",{scopedSlots:e._u([{key:"nav",fn:function(){return[n("div",{staticClass:"flex justify-between bg-gray-200 rounded-md shadow-sm flex-1 max-w-2xl self-center"},[n("button",{staticClass:"flex-1 py-1 text-gray-700 px-10 rounded-l-md",class:{"bg-blue-200 text-blue-900":"import"===e.tab},on:{click:function(t){e.tab="import"}}},[e._v(" Importieren ")]),n("button",{staticClass:"flex-1 py-1 text-gray-700 px-10",class:{"bg-blue-200 text-blue-900":"people"===e.tab},on:{click:function(t){e.tab="people"}}},[e._v(" Personen ")]),n("button",{staticClass:"flex-1 py-1 rounded-r-md text-gray-700 px-14",class:{"bg-blue-200 text-blue-900":"events"===e.tab},on:{click:function(t){e.tab="events"}}},[e._v(" Events ")])])]},proxy:!0},{key:"actions",fn:function(){return[n("button",{staticClass:"py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:bg-blue-200 hover:text-blue-900",attrs:{disabled:e.compiling},on:{click:e.preview}},[e._v(" "+e._s(e.compiling?"Komprimieren...":"Vorschau 👁‍")+" ")]),n("button",{staticClass:"py-1 px-4 rounded-md text-gray-700 bg-gray-200 hover:bg-blue-200 hover:text-blue-900",attrs:{disabled:e.compiling},on:{click:e.exportZip}},[e._v(" "+e._s(e.compiling?"Komprimieren...":"Download ZIP  ⬇")+" ")])]},proxy:!0}])}),n("main",{staticClass:"pt-5"},["people"===e.tab?n("PeopleEditor"):e._e(),n("EventsEditor",{directives:[{name:"show",rawName:"v-show",value:"events"===e.tab,expression:"tab === 'events'"}]}),n("DataImporter",{directives:[{name:"show",rawName:"v-show",value:"import"===e.tab,expression:"tab === 'import'"}]})],1)],1)},m=[],f=n("96c7"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"max-w-4xl mx-auto"},[n("h2",{staticClass:"text-2xl font-medium mb-3"},[e._v(" Personen ("+e._s(e.peopleList.length)+") ")]),n("div",{staticClass:"flex flex-wrap items-stretch gap-3"},[e._l(e.peopleList,(function(e){return n("Person",{key:e.id,attrs:{person:e}})})),n("button",{staticClass:"block bg-blue-100 rounded-md h-full px-2 py-2",on:{click:e.addPerson}},[e._v(" Person hinzufügen ")])],2)])},h=[],b=(n("07ac"),n("c64e")),g=n.n(b),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"max-w-xs px-3 py-3 bg-white rounded-md shadow-md"},[n("button",{staticClass:"p-0 font-mono font-bold text-xs text-gray-400",on:{click:function(t){return e.deletePerson(e.internalPerson.id)}}},[e._v(" X ")]),n("form",{staticClass:"flex flex-col gap-2"},[n("div",{staticClass:"mb-3"},[n("img",{staticClass:"mx-auto rounded-full w-16 h-16 mb-2",attrs:{src:e.internalPerson.avatarUrl||"https://avatars.dicebear.com/api/big-ears-neutral/"+encodeURIComponent(e.internalPerson.name)+".svg"}}),n("input",{staticClass:"mb-2",attrs:{type:"file",name:"avatar"},on:{change:function(t){return e.fileChanged(t,e.internalPerson)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.internalPerson.avatarUrl,expression:"internalPerson.avatarUrl"}],staticClass:"w-full",attrs:{type:"text",placeholder:"https://avatars.dicebear.com/api/big-ears-neutral/"+encodeURIComponent(e.internalPerson.name)+".svg"},domProps:{value:e.internalPerson.avatarUrl},on:{input:function(t){t.target.composing||e.$set(e.internalPerson,"avatarUrl",t.target.value)}}})]),n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"name"}},[e._v(" Name ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.internalPerson.name,expression:"internalPerson.name"}],staticClass:"focus:ring-indigo-500 focus:border-indigo-500 block w-full py-2 px-4 sm:text-sm bg-gray-100 border-gray-300 rounded-md",attrs:{type:"text",name:"name",id:"name",placeholder:"Markus Gasleiter"},domProps:{value:e.internalPerson.name},on:{input:function(t){t.target.composing||e.$set(e.internalPerson,"name",t.target.value)}}})])]),n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"color"}},[e._v(" Color ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.internalPerson.color,expression:"internalPerson.color"}],staticClass:"focus:ring-indigo-500 focus:border-indigo-500 block w-full py-2 px-4 sm:text-sm bg-gray-100 border-gray-300 rounded-md",attrs:{name:"color",id:"color"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.internalPerson,"color",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"purple"}},[e._v("Purple")]),n("option",{attrs:{value:"green"}},[e._v("Green")]),n("option",{attrs:{value:"blue"}},[e._v("Blue")])])])]),n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"id-field"}},[e._v(" ID ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.internalPerson.id,expression:"internalPerson.id"}],staticClass:"focus:ring-indigo-500 focus:border-indigo-500 block w-full py-2 px-4 sm:text-sm bg-gray-100 border-gray-300 rounded-md",attrs:{type:"text",name:"id-field",id:"id-field",placeholder:"1ed7504b-35bd-41b7-b8d7-38149b8a027c"},domProps:{value:e.internalPerson.id},on:{input:function(t){t.target.composing||e.$set(e.internalPerson,"id",t.target.value)}}})])])])])},w=[],y=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},C={props:{person:{type:Object,required:!0}},data:function(e){return{internalPerson:e.person}},watch:{internalPerson:function(){this.$store.commit("updatePerson",this.internalPerson)}},methods:{deletePerson:function(e){this.$store.commit("setup/deletePerson",e)},fileChanged:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.target.files[0],n.next=3,y(a);case 3:t.avatarUrl=n.sent;case 4:case"end":return n.stop()}}),n)})))()}}},k=C,_=Object(o["a"])(k,x,w,!1,null,null,null),O=_.exports,j={computed:{people:function(){return this.$store.state.setup.people},peopleList:function(){return Object.values(this.people)}},methods:{addPerson:function(){var e={id:g()(),name:"Unbenannte Person",avatarUrl:"",color:"purple"};this.$store.commit("setup/updatePerson",e)}},components:{Person:O}},E=j,S=Object(o["a"])(E,v,h,!1,null,null,null),P=S.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"max-w-4xl mx-auto mb-10"},[n("h2",{staticClass:"text-2xl font-medium mb-3 flex justify-between items-center"},[n("button",{staticClass:"font-medium",on:{click:e.next}},[e._v(" Events ("+e._s(e.timelineEvents.length)+") ")]),n("button",{staticClass:"block bg-blue-100 text-base font-regular rounded-md h-full px-2 py-2",on:{click:e.addEvent}},[e._v(" Event hinzufügen ")])]),n("div",{staticClass:"mb-10"},[n("Timeline",{ref:"timeline",attrs:{items:e.timelineEvents,options:{editable:!1,width:"100%",stack:!0,align:"left",type:"range"},events:["select"],selection:e.selectedEvent?e.selectedEvent.id:null},on:{select:e.selectEvent}})],1),e.selectedEvent?n("article",[n("div",{staticClass:"flex w-full justify-between items-center"},[n("h3",{staticClass:"text-lg font-medium mb-3"},[e._v(" Event: "+e._s(e.selectedEvent.title)+" ")]),n("button",{staticClass:"hover:bg-red-300 px-2 py-1 rounded-md",on:{click:e.deleteEvent}},[e._v("Event löschen")])]),n("MetaEditor",{model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}}),n("h4",{staticClass:"text-lg font-medium mb-3"},[e._v("Chats")]),n("ChatSelector",{attrs:{chats:Object.values(e.chats),"filter-start":e.selectedEvent.start,"filter-end":e.selectedEvent.end},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}}),n("h4",{staticClass:"text-lg font-medium mb-3"},[e._v("Locations")]),n("LocationSelector",{attrs:{locations:Object.values(e.locations)},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}})],1):e._e()])},D=[],L=n("5530"),R=(n("c740"),n("d81d"),n("13d9")),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-10"},[n("div",[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"title"}},[e._v(" Titel ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.event.title,expression:"event.title"}],staticClass:"focus:ring-indigo-500 focus:border-indigo-500 block w-full py-2 px-4 sm:text-sm border-gray-300 rounded-md",attrs:{type:"text",name:"title",id:"title",placeholder:"Zeuge betritt Geschäft"},domProps:{value:e.event.title},on:{input:function(t){t.target.composing||e.$set(e.event,"title",t.target.value)}}})]),n("div",{staticClass:"flex gap-5"},[n("div",{staticClass:"flex-1"},[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"time-start"}},[e._v(" Start-Zeit ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm flex mb-3"},[n("Datetime",{attrs:{phrases:{ok:"OK",cancel:"Abbrechen"},auto:!0,type:"datetime"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)]),n("div",{staticClass:"flex-1"},[n("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"time-start"}},[e._v(" Ende-Zeit ")]),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm flex mb-3"},[n("Datetime",{attrs:{"min-datetime":e.startDate,phrases:{ok:"OK",cancel:"Abbrechen"},auto:!0,type:"datetime"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)])])])])},U=[],I=n("859b"),M=(n("d355"),{props:{value:{type:Object,required:!0}},data:function(e){return{event:e.value,startDate:e.value.start.toISOString(),endDate:e.value.end.toISOString()}},methods:{},watch:{event:function(){this.$emit("value",this.event),this.$emit("change")},startDate:function(){this.event.start=new Date(this.startDate),this.startDate>this.endDate&&(this.event.end=new Date(this.event.start.getTime()+36e5).toISOString())},endDate:function(){this.event.end=new Date(this.endDate)},value:function(){this.event=this.value,this.startDate=this.event.start.toISOString(),this.endDate=this.event.end.toISOString()}},components:{Datetime:I["Datetime"]}}),F=M,$=Object(o["a"])(F,N,U,!1,null,null,null),T=$.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex gap-10 mb-10"},[n("div",{staticClass:"w-1/2 flex flex-col gap-2"},[0===e.chats.length?n("h2",[e._v("Keine Chats importiert")]):e._e(),e._l(e.chats,(function(t){return n("button",{key:t.id,staticClass:"text-left flex gap-3 text-sm font-medium px-3 py-2 rounded-md hover:shadow bg-green-200 hover:bg-green-300 transition text-green-900 w-full",class:{"bg-green-300":e.viewedChat&&e.viewedChat.id===t.id,"opacity-60":!e.selectedChats.includes(t.id)},on:{click:function(n){return e.viewChat(t)}}},[n("input",{attrs:{type:"checkbox",name:""},domProps:{checked:e.selectedChats.includes(t.id)},on:{change:function(n){return e.selectChat(n,t)}}}),n("div",[n("h4",[e._v(e._s(e.toSender(t.receiver).name))]),n("h5",{staticClass:"text-sm text-green-700"},[e._v(e._s(t.type))])])])}))],2),n("div",{staticClass:"w-1/2"},[e.viewedChat?n("Chat",{staticStyle:{"max-height":"800px"},attrs:{sender:e.toSender(e.viewedChat.sender),receiver:e.toSender(e.viewedChat.receiver),firstDate:e.filterStart,messages:e.viewedChat.messages.filter((function(t){return t.date>=e.filterStart&&t.date<=e.filterEnd}))}}):e._e()],1)])},z=[],H=(n("a434"),n("a8c2")),q={props:{value:{type:Object,default:function(){}},chats:{type:Array,default:function(){return[]}},filterStart:{type:Date,default:function(){return new Date}},filterEnd:{type:Date,default:function(){return new Date}}},data:function(e){return{viewedChat:e.chats&&e.chats.length>0?e.chats[0]:null}},computed:{selectedChats:function(){return this.value.chats}},methods:{toSender:function(e){return this.$store.state.setup.people[e]},selectChat:function(e,t){var n=this.selectedChats;if(e.target.checked)n.push(t.id);else{var a=n.indexOf(t.id);-1!==a&&n.splice(a,1)}this.$emit("value",n),this.$emit("change")},viewChat:function(e){this.viewedChat=e}},components:{Chat:H["a"]}},K=q,W=Object(o["a"])(K,B,z,!1,null,null,null),X=W.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex gap-10"},[n("div",{staticClass:"w-1/2 flex flex-col gap-2"},[n("form",{staticClass:"text-left text-sm font-medium px-3 py-2 rounded-md hover:shadow bg-purple-200 transition text-purple-900 w-full gap-2 flex flex-col mb-5",on:{submit:function(t){return t.preventDefault(),e.addLocation.apply(null,arguments)}}},[n("h4",[e._v("Ort hinzufügen")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLocation.description,expression:"newLocation.description"}],staticClass:"focus:ring-purple-500 focus:border-purple-500 block flex-1 py-2 px-4 sm:text-sm border-gray-300 rounded-md",attrs:{type:"text",name:"description",id:"description",placeholder:"Description",required:""},domProps:{value:e.newLocation.description},on:{input:function(t){t.target.composing||e.$set(e.newLocation,"description",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLocation.position.lat,expression:"newLocation.position.lat"}],staticClass:"focus:ring-purple-500 focus:border-purple-500 block flex-1 py-2 px-4 sm:text-sm border-gray-300 rounded-md",attrs:{type:"text",name:"lat",id:"lat",placeholder:"Latitude",required:""},domProps:{value:e.newLocation.position.lat},on:{input:function(t){t.target.composing||e.$set(e.newLocation.position,"lat",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLocation.position.lng,expression:"newLocation.position.lng"}],staticClass:"focus:ring-purple-500 focus:border-purple-500 block flex-1 py-2 px-4 sm:text-sm border-gray-300 rounded-md",attrs:{type:"text",name:"long",id:"long",placeholder:"Longitude",required:""},domProps:{value:e.newLocation.position.lng},on:{input:function(t){t.target.composing||e.$set(e.newLocation.position,"lng",t.target.value)}}}),e._m(0)]),e._l(e.locations,(function(t){return n("button",{key:t.id,staticClass:"text-left text-sm font-medium px-3 flex gap-2 py-2 rounded-md hover:shadow bg-purple-200 hover:bg-purple-300 transition text-purple-900 w-full",class:{"bg-purple-300":e.viewedLocation&&e.viewedLocation.id===t.id,"opacity-60":!e.value.locations.includes(t.id)},on:{click:function(n){return e.viewLocation(t)}}},[n("input",{attrs:{type:"checkbox",name:""},domProps:{checked:e.value.locations.includes(t.id)},on:{change:function(n){return e.selectLocation(n,t)}}}),n("div",{staticClass:"flex-1"},[n("button",{staticClass:"flex-1 text-left mb-1"},[e._v(" "+e._s(t.description)+" ")]),n("select",{staticClass:"w-full",on:{change:function(n){return e.changePerson(n,t)}}},[n("option",{attrs:{value:""},domProps:{selected:null===t.person}},[e._v("–")]),e._l(e.allPeople,(function(a){return n("option",{key:a.id,domProps:{value:a.id,selected:t.person===a.id}},[e._v(" "+e._s(a.name)+" ")])}))],2)]),n("button",{staticClass:"font-mono",on:{click:function(n){return e.removeLocation(t)}}},[e._v("X")])])}))],2),n("div",{staticClass:"w-1/2"},[e.viewedLocation?n("LMap",{staticClass:"rounded-md shadow-md",staticStyle:{height:"300px"},attrs:{zoom:15,center:e.viewedLocation.position}},[n("LTileLayer",{attrs:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:null}}),n("LMarker",{attrs:{"lat-lng":e.viewedLocation.position,icon:e.icon(e.viewedLocation)}})],1):e._e()],1)])},Z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-1 flex justify-end"},[n("button",{staticClass:"hover:bg-purple-300 px-2 py-1 rounded-md",attrs:{type:"submit"}},[e._v(" Hinzufügen ")])])}],G=(n("6cc5"),n("2699")),J=n("a40a"),V=n("4e2b"),Y=n("1185"),ee={props:{value:{type:Object,required:!0},locations:{type:Array,default:function(){return[{id:"aaa",position:{lat:53.228909,lng:10.401397},date:new Date,description:"Kiosk"}]}}},watch:{value:function(){this.$emit("change")}},data:function(e){return{newLocation:{id:g()(),position:{lat:53.228093,lng:10.373144},description:"Haus"},viewedLocation:e.locations&&e.locations.length>0?e.locations[0]:null}},computed:{selectedLocations:function(){return this.value.locations},allPeople:function(){return Object.values(this.$store.state.setup.people)}},methods:{icon:function(e){return Object(Y["a"])(e,this.$store.state.setup.people)},selectLocation:function(e,t){var n=this.selectedLocations;if(e.target.checked)n.push(t.id);else{var a=n.indexOf(t.id);-1!==a&&n.splice(a,1)}this.$emit("value",n),this.$emit("change")},addLocation:function(){var e=this;this.$store.commit("setup/updateLocation",this.newLocation),this.selectLocation({target:{checked:!0}},this.newLocation),this.newLocation={id:g()(),position:{lat:53.228093,lng:10.373144},description:""},setTimeout((function(){e.$forceUpdate()}),1e3)},viewLocation:function(e){this.viewedLocation=e},removeLocation:function(e){this.$store.commit("setup/deleteLocation",e);var t=this.selectedLocations,n=t.indexOf(e.id);-1!==n&&t.splice(n,1),this.$emit("value",t),this.$forceUpdate()},changePerson:function(e,t){console.log("lol"),this.$store.commit("setup/setLocationPerson",{location:t,person:e.target.value})}},components:{LMap:G["a"],LTileLayer:J["a"],LMarker:V["a"]}},te=ee,ne=Object(o["a"])(te,Q,Z,!1,null,null,null),ae=ne.exports;function re(){return g()()}var se={components:{Timeline:R["a"],MetaEditor:T,ChatSelector:X,LocationSelector:ae},data:function(){return{selectedEvent:null}},watch:{selectedEvent:{deep:!0,handler:function(){this.selectedEvent&&(this.$store.commit("setup/updateEvent",this.selectedEvent),this.$refs.timeline.focus(this.selectedEvent.id))}}},methods:{addEvent:function(){var e={id:re(),title:"Unbenanntes Event",start:new Date,end:new Date(Date.now()+36e5),chats:[],locations:[]};this.$store.commit("setup/updateEvent",e),this.selectedEvent=e},deleteEvent:function(){this.$store.commit("setup/deleteEvent",this.selectedEvent.id),this.selectedEvent=null},selectEvent:function(e){var t=e.items;console.log(t),t.length>0&&(this.selectedEvent=this.events[t[0]])},next:function(){var e=this;if(!this.selectedEvent)return this.selectEvent({items:[this.timelineEvents[0].id]});var t=this.timelineEvents.findIndex((function(t){return t.id===e.selectedEvent.id}));-1===t||++t>=this.timelineEvents.length?this.selectEvent({items:[this.timelineEvents[0].id]}):this.selectEvent({items:[this.timelineEvents[t].id]})}},computed:{events:function(){return this.$store.state.setup.events},timelineEvents:function(){return Object.values(this.events).map((function(e){return Object(L["a"])(Object(L["a"])({},e),{},{content:e.title})}))},chats:function(){return this.$store.state.setup.chats||{"whatsapp-1":{id:"whatsapp-1",type:"whatsapp",receiver:"601cff75-9252-4086-998b-8938209ed879",sender:"1ed7504b-35bd-41b7-b8d7-38149b8a027c",messages:[{id:re(),date:new Date,sender:"601cff75-9252-4086-998b-8938209ed879",type:"text",text:"Ey yo kannst du heute noch die Schicht übernehmen?"},{id:re(),date:new Date(Date.now()+6e4),sender:"1ed7504b-35bd-41b7-b8d7-38149b8a027c",type:"image",mediaSrc:"https://image.spreadshirtmedia.net/image-server/v1/mp/products/T1459A839PA4459PT28D129372714FS7416/views/1,width=378,height=378,appearanceId=839,backgroundColor=F2F2F2/mittelfinger-fuck-you-sticker.jpg"}]}}},locations:function(){return this.$store.state.setup.locations||{a:{id:"a",position:{lat:53.228093,lng:10.373144},date:new Date("2021-10-01 15:50:00"),person:"aaa",description:"Haus"},b:{id:"b",position:{lat:53.232634,lng:10.393671},date:new Date("2021-10-01 16:22:00"),description:"Arbeit"}}}}},ie=se,oe=(n("b859"),Object(o["a"])(ie,A,D,!1,null,null,null)),ce=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"max-w-4xl mx-auto"},[n("h2",{staticClass:"text-2xl font-medium mb-3"},[e._v("Daten importieren")]),n("input",{attrs:{type:"file"},on:{change:e.changed}}),n("select",{directives:[{name:"model",rawName:"v-model",value:e.rootPath,expression:"rootPath"}],staticClass:"mb-10",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.rootPath=t.target.multiple?n:n[0]}}},[n("option",[e._v("/")]),e._l(e.rootDirs,(function(t){return n("option",{key:t},[e._v("/"+e._s(t))])}))],2),n("h3",{staticClass:"text-xl font-medium mb-4"},[e._v("Dateien")]),n("h4",{staticClass:"text-lg font-medium text-gray-700 mb-2"},[e._v(" Path: "),n("code",{staticClass:"font-mono text-gray-600"},[e._v(e._s(e.rootPath))])]),n("h4",{staticClass:"text-lg font-medium text-gray-700 mb-1"},[e._v("Files:")]),n("table",{staticClass:"mb-3 text-gray-600 text-left w-full"},[e._m(0),n("tbody",{staticClass:"font-mono"},e._l(e.parsedDirs,(function(t){return n("tr",{key:t.dir},[n("td",[e._v(" "+e._s("none"!==t.type?"✅":"❓")+" ")]),n("td",{class:{"opacity-60":"none"===t.type}},[e._v(" "+e._s(t.dir)+" ")]),n("td",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"dir.type"}],on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"type",n.target.multiple?a:a[0])},function(t){return e.$forceUpdate()}]}},e._l(e.typeOptions,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),0)])])})),0)]),n("button",{staticClass:"block bg-blue-100 rounded-md h-full px-2 py-2 self-end mb-10",on:{click:e.loadData}},[e._v(" Daten auslesen ")]),e.importMessage?n("strong",{staticClass:"block mb-10"},[e._v(e._s(e.importMessage))]):e._e(),e.activeImport?n("h4",{staticClass:"text-xl font-medium text-gray-700 mb-1"},[e._v("Chats:")]):e._e(),e.activeImport?n("table",{staticClass:"mb-3 text-gray-600 text-left"},[e._m(1),n("tbody",{staticClass:"font-mono"},e._l(e.activeImport.chats,(function(t){return n("tr",{key:t.id,class:{"opacity-60":!t.enabled}},[n("td",[e._v(" "+e._s("whatsapp"===t.type?"WhatsApp":t.type)+" ")]),n("td",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.receiver,expression:"chat.receiver"}],staticClass:"w-3/4",on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"receiver",n.target.multiple?a:a[0])},function(t){return e.$forceUpdate()}]}},[e._l(e.allPeople,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),e._l(e.activeImport.people,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),n("td",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.sender,expression:"chat.sender"}],staticClass:"w-3/4",on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"sender",n.target.multiple?a:a[0])},function(t){return e.$forceUpdate()}]}},[e._l(e.allPeople,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),e._l(e.activeImport.people,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"chat.enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?e._i(t.enabled,null)>-1:t.enabled},on:{change:function(n){var a=t.enabled,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);r.checked?o<0&&e.$set(t,"enabled",a.concat([i])):o>-1&&e.$set(t,"enabled",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(t,"enabled",s)}}})])])})),0)]):e._e(),e.activeImport?n("button",{staticClass:"block bg-blue-100 rounded-md h-full px-2 py-2 self-end mb-20",on:{click:e.importData}},[e._v(" Importieren ")]):e._e()])},ue=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("th",[e._v("Erkannt:")]),n("th",[e._v("Dateiname:")]),n("th",[e._v("Importieren als:")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("th",[e._v("Typ:")]),n("th",[e._v("Empfänger:")]),n("th",[e._v("Sender:")]),n("th",[e._v("Importieren:")])])}],de=(n("99af"),n("caad"),n("2532"),n("4de4"),n("9b7f")),pe=n("b85c"),me=(n("ac1f"),n("5319"),n("2b3d"),n("9861"),n("820e"),null);function fe(){return ve.apply(this,arguments)}function ve(){return ve=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me){e.next=4;break}return e.next=3,window.initSqlJs({locateFile:function(e){return"https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.1/".concat(e)}});case 3:me=e.sent;case 4:return e.abrupt("return",me);case 5:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}function he(e,t){return be.apply(this,arguments)}function be(){return be=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.chats,r=n.people,s=n.files,e.next=3,fe();case 3:return i=e.sent,o=new i.Database(t),o.each("SELECT DISTINCT Contact, ContactAlias FROM data",{},(function(e){var t={id:e.Contact,name:e.ContactAlias};r[t.id]=Object(L["a"])(Object(L["a"])({id:e.Contact},r[t.id]||{}),{},{name:e.ContactAlias||e.Contact})})),e.abrupt("return",{chats:a,people:r,files:s});case 7:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function ge(e){return xe.apply(this,arguments)}function xe(){return xe=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,i,o,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:for(n=e.sent,r=new n.Database(t),s={},i=[],o={},c={},l=[],r.each("SELECT\n\t\t\tmessages.*,\n\t\t\tmessage_media.file_path\n\t\tFROM\n\t\t\tmessages\n\t\t\tLEFT JOIN message_media ON messages.media_url = message_media.message_url",{},(function(e){var t={id:e.key_remote_jid,name:e.key_remote_jid,avatarUrl:"https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/00/00bb8a893a2e125c3fce471364154f950a8db60d.jpg",color:"green"};s[t.id]?t=s[t.id]:s[t.id]=t;var n={id:g()(),sender:t.id,chatId:t.id,date:new Date(e.timestamp),type:"text",isSender:1===e.key_from_me,text:e.data||e.media_caption,mediaSrc:e.file_path,mimeType:e.media_mime_type};n.mediaSrc&&l.push(Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(de["e"])(n.mediaSrc.replace("Media/","/import/Export/files/media/0/WhatsApp/Media/"),null);case 3:return t=e.sent,a=new Blob([t.buffer],{type:n.mimeType||"image/jpeg"}),c[n.mediaSrc]=URL.createObjectURL(a),r=n.mediaSrc.replace("Media/","/assets/Media/"),console.log(r),e.next=10,Object(de["a"])(r);case 10:return e.next=12,Object(de["f"])(r,t,null);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.error("could not fetch file",n.mediaSrc,e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()),(n.text||n.mediaSrc)&&i.push(n)})),u=0,d=i;u<d.length;u++)p=d[u],m="chat-".concat(p.chatId),m in o?o[m].messages.push(p):o[m]={id:m,type:"whatsapp",receiver:p.chatId,sender:null,messages:[p]};return e.next=13,Promise.allSettled(l);case 13:return e.abrupt("return",{chats:o,people:s,files:c});case 14:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function we(e){return ye.apply(this,arguments)}function ye(){return ye=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s,i,o,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(de["d"])(t,"/load");case 2:return e.t0=JSON,e.next=5,Object(de["e"])("/load/Viz.json");case 5:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),console.log(n),n.files={},a=0,r=Object.values(n.chats);case 10:if(!(a<r.length)){e.next=48;break}s=r[a],i=Object(pe["a"])(s.messages),e.prev=13,i.s();case 15:if((o=i.n()).done){e.next=37;break}if(c=o.value,e.prev=17,c.date=new Date(c.date),console.info(c.mediaSrc),!c.mediaSrc){e.next=30;break}return e.next=23,Object(de["e"])("/load/".concat(c.mediaSrc),null);case 23:return l=e.sent,u=new Blob([l.buffer],{type:c.mimeType||"image/jpeg"}),n.files[c.mediaSrc]=URL.createObjectURL(u),e.next=28,Object(de["a"])("/assets/".concat(c.mediaSrc));case 28:return e.next=30,Object(de["f"])("/assets/".concat(c.mediaSrc),l,null);case 30:e.next=35;break;case 32:e.prev=32,e.t2=e["catch"](17),console.error("could not fetch file",c.mediaSrc,e.t2);case 35:e.next=15;break;case 37:e.next=42;break;case 39:e.prev=39,e.t3=e["catch"](13),i.e(e.t3);case 42:return e.prev=42,i.f(),e.finish(42);case 45:a++,e.next=10;break;case 48:for(d=0,p=Object.values(n.events);d<p.length;d++)m=p[d],m.start=new Date(m.start),m.end=new Date(m.end);return e.abrupt("return",n);case 50:case"end":return e.stop()}}),e,null,[[13,39,42,45],[17,32]])}))),ye.apply(this,arguments)}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="/import".concat(e);return de["b"].existsSync(t)?de["b"].readdirSync(t):[]}function ke(e){switch(e){case"Messenger.db":return"mr-messages";case"msgstore.db":return"wa-msgstore";case"Calls.db":return"mr-calls"}return"none"}var _e={data:function(){return{rootPath:"/",rootDirs:Ce("/"),dirs:Ce("/"),counter:0,activeImport:null,importMessage:null}},methods:{changed:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0===e.target.files.length){n.next=3;break}return n.next=3,Object(de["d"])(e.target.files[0]);case 3:t.rootDirs=Ce("/"),t.dirs=Ce(t.rootPath);case 5:case"end":return n.stop()}}),n)})))()},loadData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=null,r=null,t.next=4,Promise.all(e.parsedDirs.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=a.type,t.next="wa-msgstore"===t.t0?3:"mr-messages"===t.t0?7:11;break;case 3:return t.next=5,Object(de["e"])("/import".concat(e.rootPath,"/").concat(a.dir),null);case 5:return n=t.sent,t.abrupt("break",11);case 7:return t.next=9,Object(de["e"])("/import".concat(e.rootPath,"/").concat(a.dir),null);case 9:return r=t.sent,t.abrupt("break",11);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return e.importMessage=null,t.next=7,ge(n);case 7:if(s=t.sent,!r){t.next=15;break}return t.next=11,he(r,s);case 11:i=t.sent,e.activeImport=i,t.next=16;break;case 15:e.activeImport=s;case 16:o=Object.values(e.activeImport.chats).length,c=Object.values(e.activeImport.people).length,e.importMessage="Es wurden ".concat(o," Chats und ").concat(c," Personen gefunden.");case 19:case"end":return t.stop()}}),t)})))()},importData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.activeImport){t.next=2;break}return t.abrupt("return");case 2:for(n={},a=0,r=0,s=Object.values(e.activeImport.chats);r<s.length;r++)i=s[r],i.enabled&&(n[i.id]=i,o=e.activeImport.people[i.sender]||e.$store.state.setup.people[i.sender],c=e.activeImport.people[i.receiver]||e.$store.state.setup.people[i.receiver],o&&(e.$store.commit("setup/updatePerson",o),a++),c&&(e.$store.commit("setup/updatePerson",c),a++));l=Object.values(n).length,e.importMessage="Es wurden ".concat(l," Chats und ").concat(a," Personen importiert."),e.$store.commit("setup/addChats",n),e.$store.commit("setup/addFiles",e.activeImport.files),e.activeImport=null;case 10:case"end":return t.stop()}}),t)})))()}},computed:{importActive:function(){return this.dirs.includes("msgstore.db")},parsedDirs:function(){return this.dirs.map((function(e){return{dir:e,type:ke(e)}}))},typeOptions:function(){return[{label:"-",value:"none"},{label:"Mobile Revelator – Messenger.db",value:"mr-messages"},{label:"WhatsApp – msgstore.db",value:"wa-msgstore"},{label:"Mobile Revelator – Calls.db",value:"mr-calls"}]},allPeople:function(){return Object.values(this.$store.state.setup.people).filter((function(e){return!!e}))}},watch:{rootPath:function(e){this.dirs=Ce(e)}}},Oe=_e,je=Object(o["a"])(Oe,le,ue,!1,null,null,null),Ee=je.exports,Se={name:"Editor",components:{Header:f["a"],PeopleEditor:P,EventsEditor:ce,DataImporter:Ee},data:function(){return{tab:"import",compiling:!1}},methods:{exportZip:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.compiling=!0,e.$store.dispatch("setup/exportAsFile"),e.compiling=!1;case 3:case"end":return t.stop()}}),t)})))()},preview:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.compiling=!0,t.next=3,e.$store.dispatch("setup/preview");case 3:e.compiling=!1,e.$router.push("/map");case 5:case"end":return t.stop()}}),t)})))()}}},Pe=Se,Ae=Object(o["a"])(Pe,p,m,!1,null,null,null),De=Ae.exports;r["default"].use(d["a"]);var Le=[{path:"/",name:"Editor",component:De},{path:"/map",name:"Map",component:function(){return n.e("map").then(n.bind(null,"4bb4"))}}],Re=new d["a"]({routes:Le}),Ne=Re,Ue=n("2f62"),Ie={namespaced:!0,state:function(){return{selectedEventId:null}},mutations:{selectEvent:function(e,t){e.selectedEventId=t}},actions:{}},Me=(n("4e82"),n("1276"),n("e9c4"),window.zip);function Fe(e,t,n,a,r,s){return $e.apply(this,arguments)}function $e(){return $e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a,r,s,i){var o,c,l,u,d,p,m,f,v,h,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n,a,r,s,i),o=new Blob([JSON.stringify({projectName:t,people:n,chats:a,locations:r,events:s},null,2)],{type:"application/json"}),c=new Me.BlobWriter("application/zip"),l=new Me.ZipWriter(c),e.next=6,l.add("Viz.json",new Me.BlobReader(o));case 6:u=0,d=Object.values(a);case 7:if(!(u<d.length)){e.next=42;break}p=d[u],console.log(p),m=Object(pe["a"])(p.messages),e.prev=11,m.s();case 13:if((f=m.n()).done){e.next=31;break}if(v=f.value,console.log(v),!v.mediaSrc){e.next=29;break}return e.prev=17,e.next=20,Object(de["e"])(v.mediaSrc.replace("Media/","/assets/Media/"),null);case 20:return h=e.sent,b=new Blob([h.buffer],{type:"image/jpeg"}),e.next=24,l.add(v.mediaSrc,new Me.BlobReader(b));case 24:e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](17),console.error("could not add file",e.t0);case 29:e.next=13;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e["catch"](11),m.e(e.t1);case 36:return e.prev=36,m.f(),e.finish(36);case 39:u++,e.next=7;break;case 42:return e.next=44,l.close();case 44:return e.abrupt("return",c.getData());case 45:case"end":return e.stop()}}),e,null,[[11,33,36,39],[17,26]])}))),$e.apply(this,arguments)}console.log(Me);var Te={namespaced:!0,state:function(){return{projectName:"Forensik Viz",people:{},chats:{},locations:{},events:{},files:{}}},getters:{eventList:function(e){return Object.values(e.events).sort((function(e,t){var n=e.start,a=t.start;return n<a?-1:n>a?1:0})).map((function(e){return Object(L["a"])(Object(L["a"])({},e),{},{content:e.title})}))}},mutations:{setViz:function(e,t){e.projectName=t.projectName||"Forensik Viz",e.people=t.people||{},e.chats=t.chats||{},e.locations=t.locations||{},e.events=t.events||{},e.files=t.files||{}},setProjectName:function(e,t){e.projectName=t},updateEvent:function(e,t){r["default"].set(e.events,t.id,t)},deleteEvent:function(e,t){r["default"].delete(e.events,t)},addChats:function(e,t){e.chats=Object(L["a"])(Object(L["a"])({},e.chats),t)},addFiles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.files=Object(L["a"])(Object(L["a"])({},e.files),t)},updateLocation:function(e,t){r["default"].set(e.locations,t.id,t)},deleteLocation:function(e,t){r["default"].delete(e.locations,t.id)},setLocationPerson:function(e,t){var n=t.location,a=t.person;e.locations[n.id].person=a},updatePerson:function(e,t){r["default"].set(e.people,t.id,t.id in e.people?Object(L["a"])(Object(L["a"])({},e.people[t.id]),t):t)},deletePerson:function(e,t){r["default"].delete(e.people,t)}},actions:{exportAsFile:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fe(e.state.projectName,e.state.people,e.state.chats,e.state.locations,e.state.events,e.state.files);case 2:n=t.sent,a=window.URL.createObjectURL(n),r=document.createElement("a"),r.href=a,r.download="".concat((new Date).toISOString().split(".")[0],".viz"),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){window.URL.revokeObjectURL(a),r.remove()}),100);case 9:case"end":return t.stop()}}),t)})))()},loadFile:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,we(t);case 3:n.t1=n.sent,n.t0.commit.call(n.t0,"setViz",n.t1);case 5:case"end":return n.stop()}}),n)})))()}}};r["default"].use(Ue["a"]);var Be=new Ue["a"].Store({state:{people:{1:{name:"Markus Gasleiter",avatarUrl:"https://i.pravatar.cc/300"},2:{name:"Frank Susmann",avatarUrl:"https://i.pravatar.cc/200"}}},mutations:{},actions:{},modules:{map:Ie,setup:Te}}),ze=(n("0fae"),n("ba8c"),n("0808"),n("6944")),He=n.n(ze);function qe(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(de["c"])();case 2:r["default"].use(He.a),r["default"].config.productionTip=!1,new r["default"]({router:Ne,store:Be,render:function(e){return e(u)}}).$mount("#app");case 5:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}qe().catch((function(e){return console.error("GLOBAL CATCH:",e)}))},"6a83":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},"96c7":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{class:{"bg-blue-600 text-blue-100 font-bold flex items-center justify-between":!0,"h-12 px-3":!e.small,"h-8 text-xs":e.small}},[n("h1",{staticClass:"flex-1"},[n("input",{staticClass:"font-bold text-blue-100 bg-transparent border-none focus:bg-blue-100 focus:text-blue-900 rounded pl-2",class:{"text-sm":e.small,"text-xl":!e.small},attrs:{type:"text",name:"",disabled:e.locked},domProps:{value:e.projectName},on:{input:e.changedProjectName}})]),n("nav",{staticClass:"mx-auto flex justify-center items-center my-5 px-10"},[e._t("nav")],2),n("div",{staticClass:"flex-1 flex justify-end items-center gap-5"},[e._t("actions")],2)])},r=[],s={props:{small:{type:Boolean},locked:{type:Boolean,default:function(){return!1}}},computed:{projectName:function(){return this.$store.state.setup.projectName}},methods:{changedProjectName:function(e){this.$store.commit("setup/setProjectName",e.target.value)}}},i=s,o=n("2877"),c=Object(o["a"])(i,a,r,!1,null,null,null);t["a"]=c.exports},"9b7f":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return h}));var a=n("b85c"),r=n("1da1"),s=(n("d3b7"),n("ac1f"),n("1276"),n("fb6a"),n("96cf"),n("3b92")),i=new e.FileSystem.MountableFileSystem,o=e.BFSRequire("buffer").Buffer;function c(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initialize(i),console.log(s["FileFlag"]),i.mount("/assets",new e.FileSystem.InMemory),t.next=5,g("/assets/Media");case 5:return t.next=7,f("/assets/Media/test.txt","Hello World!");case 7:window.fs=i,window.BrowserFS=e;case 9:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function t(n){var a,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"/import",t.abrupt("return",new Promise((function(t,r){i.existsSync(a)&&i.umount(a);var s=new FileReader;s.onload=function(n){var r=n.target.result;i.mount(a,new e.FileSystem.ZipFS(o.from(r))),t()},s.onerror=r,s.readAsArrayBuffer(n)})));case 2:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"utf8",a=r.length>2&&void 0!==r[2]?r[2]:new s["FileFlag"]("r"),e.abrupt("return",new Promise((function(e,r){i.readFile(t,n,a,(function(t,n){t?r(t):e(n)}))})));case 3:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(e,t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){i.writeFile(t,n,"utf8",new s["FileFlag"]("w+"),0,(function(t){t?a(t):e()}))})));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split("/"),n=n.slice(1,n.length-1),console.log("Paths",n),r="",s=Object(a["a"])(n);try{for(s.s();!(o=s.n()).done;)c=o.value,r+="/"+c,console.log("Ensure Path",r,n),i.existsSync(r)||i.mkdirSync(r)}catch(l){s.e(l)}finally{s.f()}case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){i.mkdir(t,0,(function(t){t?n(t):e()}))})));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}}).call(this,n("187c"))},a8c2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col gap-3 overflow-y-scroll pb-5"},[n("div",{staticClass:"text-center text-xs font-medium text-gray-900 opacity-40"},[e._v(" "+e._s(e.safeFirstDate.toLocaleString())+" ")]),e._l(e.rebasedMessages,(function(t){return n("Bubble",{key:t.id,attrs:{message:t,right:t.isSender,sender:t.isSender?e.sender:e.receiver,color:e.color+"-200"}})}))],2)},r=[],s=n("5530"),i=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"w-full flex "+(e.right?"justify-end pl-12":"justify-start pr-12")},[n("div",{class:"max-w-sm flex gap-2  "+(this.right?"flex-row-reverse":"")},[n("img",{staticClass:"h-6 w-6 rounded-full",attrs:{src:e.sender.avatarUrl||"https://avatars.dicebear.com/api/bottts/"+encodeURIComponent(e.sender.name)+".svg"}}),n("div",{class:e.classes},[e.message.mediaSrc?n("button",{staticClass:"block mb-2 w-full"},[n("FSImg",{attrs:{src:e.message.mediaSrc,mime:e.message.mimeType},on:{click:e.onImageClick}})],1):e._e(),e.message.text?n("p",{class:"block text-gray-900 mb-2"},[e._v(" "+e._s(e.message.text)+" ")]):e._e(),n("span",{class:"block text-xs text-gray-900 opacity-60 "+(e.right?"text-right":"")},[e._v(" "+e._s(e.message.date.toLocaleString())+" ")])])])])}),o=[],c=n("ade3"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isImage?n("img",{staticClass:"w-full",attrs:{src:e.url},on:{click:function(t){return e.$emit("click",t)}}}):n("video",{staticClass:"w-full",attrs:{controls:"",loop:""}},[n("source",{attrs:{src:e.url,type:e.mime}})])])},u=[],d={props:{src:{type:String,required:!0},mime:{type:String,default:"image/jpeg"}},data:function(){return{dataUri:""}},created:function(){},computed:{url:function(){return this.$store.state.setup.files[this.src]},isImage:function(){return-1===(this.mime||"image/jpeg").indexOf("video")}}},p=d,m=n("2877"),f=Object(m["a"])(p,l,u,!1,null,null,null),v=f.exports,h={props:{message:{type:Object,required:!0},sender:{type:Object,default:function(){return{id:"1ed7504b-35bd-41b7-b8d7-38149b8a027c",name:"Unbekannt",avatarUrl:"https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/00/00bb8a893a2e125c3fce471364154f950a8db60d.jpg",color:"purple"}}},right:{type:Boolean,default:!1},color:{type:String,default:"gray-300"}},computed:{classes:function(){var e;return e={"block px-3 py-2 rounded-lg text-left shadow":!0},Object(c["a"])(e,"rounded-tr-none bg-".concat(this.color),!!this.right),Object(c["a"])(e,"rounded-tl-none bg-gray-300",!this.right),e}},methods:{onImageClick:function(e){this.$viewerApi({images:[e.target.src],options:{toolbar:!1,navbar:!1}})}},components:{FSImg:v}},b=h,g=Object(m["a"])(b,i,o,!1,null,null,null),x=g.exports,w={props:{messages:{type:Array,required:!0},sender:{type:Object,required:!0},receiver:{type:Object,required:!0},color:{type:String,default:"green"},firstDate:{type:Date},basePath:{type:String,default:"/import/Export/files/media/0/WhatsApp/Media/"}},computed:{safeFirstDate:function(){return this.messages[0]?this.messages[0].date:this.firstDate||new Date},rebasedMessages:function(){return this.messages.map((function(e){return e.mediaSrc?Object(s["a"])({},e):e}))}},components:{Bubble:x},methods:{}},y=w,C=Object(m["a"])(y,a,r,!1,null,null,null);t["a"]=C.exports},b660:function(e,t,n){},b859:function(e,t,n){"use strict";n("b660")},ba8c:function(e,t,n){}});
//# sourceMappingURL=app.03d6e41d.js.map